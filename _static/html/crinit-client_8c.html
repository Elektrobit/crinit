<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Crinit -- Configurable Rootfs Init: src/crinit-client.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Crinit -- Configurable Rootfs Init
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('crinit-client_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">crinit-client.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<h3 class="version">(/usr/bin/git
2025-02-19, commit: 708baf7)</h3>
<p>Implementation of the crinit-client shared library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="crinit-client_8h_source.html">crinit-client.h</a>&quot;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;<a class="el" href="common_8h_source.html">common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="globopt_8h_source.html">globopt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="logio_8h_source.html">logio.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sockcom_8h_source.html">sockcom.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for crinit-client.c:</div>
<div class="dyncontent">
<div class="center"><img src="crinit-client_8c__incl.png" border="0" usemap="#asrc_2crinit-client_8c" alt=""/></div>
<map name="asrc_2crinit-client_8c" id="asrc_2crinit-client_8c">
<area shape="rect" title="Implementation of the crinit&#45;client shared library." alt="" coords="613,5,744,31"/>
<area shape="rect" href="crinit-client_8h.html" title="Public definitions/declarations for using the crinit&#45;client shared library." alt="" coords="318,299,426,324"/>
<area shape="poly" title=" " alt="" coords="614,30,509,50,463,64,434,81,415,103,401,129,382,185,375,240,373,285,368,284,369,240,377,184,396,127,411,100,430,77,461,59,507,45,613,25"/>
<area shape="rect" title=" " alt="" coords="445,79,515,104"/>
<area shape="poly" title=" " alt="" coords="648,33,526,76,525,71,646,28"/>
<area shape="rect" title=" " alt="" coords="769,152,839,177"/>
<area shape="poly" title=" " alt="" coords="715,28,753,47,771,61,786,77,800,107,806,138,801,139,795,109,782,80,767,65,750,52,713,33"/>
<area shape="rect" title=" " alt="" coords="591,79,665,104"/>
<area shape="poly" title=" " alt="" coords="672,33,646,69,642,66,668,29"/>
<area shape="rect" href="common_8h.html" title="Header for common definitions/functions not related to other specific features." alt="" coords="512,372,603,397"/>
<area shape="poly" title=" " alt="" coords="649,33,613,52,581,80,567,101,560,118,556,163,556,239,559,358,554,358,551,239,551,163,554,117,562,98,577,77,610,48,646,28"/>
<area shape="rect" href="globopt_8h.html" title="Header related to global option storage." alt="" coords="689,79,772,104"/>
<area shape="poly" title=" " alt="" coords="689,29,716,66,712,69,685,33"/>
<area shape="rect" href="logio_8h.html" title="Header related to debug/log output." alt="" coords="847,79,913,104"/>
<area shape="poly" title=" " alt="" coords="712,28,835,71,834,77,710,33"/>
<area shape="rect" href="sockcom_8h.html" title="Header defining Crinit socket communication functions used internally by the crinit&#45;client library." alt="" coords="1018,79,1110,104"/>
<area shape="poly" title=" " alt="" coords="741,28,1005,77,1004,82,740,33"/>
<area shape="rect" title=" " alt="" coords="307,372,437,397"/>
<area shape="poly" title=" " alt="" coords="375,324,375,358,369,358,369,324"/>
<area shape="rect" title=" " alt="" coords="112,372,184,397"/>
<area shape="poly" title=" " alt="" coords="337,327,198,370,196,365,335,321"/>
<area shape="rect" title=" " alt="" coords="208,372,283,397"/>
<area shape="poly" title=" " alt="" coords="353,326,279,367,277,363,350,322"/>
<area shape="rect" title=" " alt="" coords="700,592,783,617"/>
<area shape="poly" title=" " alt="" coords="390,322,450,370,499,418,534,459,570,499,623,542,662,565,700,584,698,589,659,570,620,546,567,503,530,463,495,422,446,374,387,326"/>
<area shape="rect" href="crinit-sdefs_8h.html" title="Definitions shared between crinit&#39;s public and internal APIs." alt="" coords="728,372,835,397"/>
<area shape="poly" title=" " alt="" coords="427,319,714,369,714,374,426,325"/>
<area shape="rect" href="version_8h.html" title="Header definitions related to component versioning." alt="" coords="5,372,88,397"/>
<area shape="poly" title=" " alt="" coords="320,327,102,374,101,369,319,321"/>
<area shape="rect" title=" " alt="" coords="991,519,1087,544"/>
<area shape="poly" title=" " alt="" coords="794,395,830,431,880,468,932,494,983,512,981,517,930,499,877,473,826,435,790,399"/>
<area shape="rect" title=" " alt="" coords="189,445,259,471"/>
<area shape="poly" title=" " alt="" coords="76,395,184,438,182,443,74,400"/>
<area shape="poly" title=" " alt="" coords="512,398,273,449,272,444,511,393"/>
<area shape="rect" title=" " alt="" coords="1012,592,1087,617"/>
<area shape="poly" title=" " alt="" coords="579,395,704,461,877,542,1000,586,998,591,875,546,701,465,577,400"/>
<area shape="poly" title=" " alt="" coords="719,106,696,128,671,159,651,196,645,216,643,237,643,459,650,496,668,530,692,559,717,581,713,585,689,562,664,533,645,498,637,460,637,237,640,215,646,194,667,156,692,125,715,102"/>
<area shape="poly" title=" " alt="" coords="745,102,784,140,780,144,741,106"/>
<area shape="rect" href="envset_8h.html" title="Header defining data types and functions to work with sets of environment variables." alt="" coords="1147,372,1226,397"/>
<area shape="poly" title=" " alt="" coords="734,104,741,139,748,158,759,176,779,191,817,212,926,265,1148,364,1146,369,923,270,814,217,776,195,755,179,743,161,736,140,729,105"/>
<area shape="poly" title=" " alt="" coords="1184,399,1151,463,1101,546,1071,583,1067,580,1096,542,1146,460,1179,396"/>
<area shape="rect" href="confparse_8h.html" title="Header related to the Config Parser." alt="" coords="891,445,989,471"/>
<area shape="poly" title=" " alt="" coords="1148,400,994,444,992,439,1146,395"/>
<area shape="poly" title=" " alt="" coords="926,473,770,586,767,581,923,469"/>
<area shape="poly" title=" " alt="" coords="957,469,1013,508,1010,513,954,473"/>
<area shape="rect" href="fseries_8h.html" title="Header defining functions related to the handling of a series of filenames within a directory." alt="" coords="887,519,966,544"/>
<area shape="poly" title=" " alt="" coords="940,471,934,506,929,505,935,471"/>
<area shape="poly" title=" " alt="" coords="898,547,785,589,783,585,896,542"/>
<area shape="poly" title=" " alt="" coords="948,542,1019,583,1016,587,945,546"/>
<area shape="poly" title=" " alt="" coords="880,105,870,138,854,178,836,210,817,235,780,274,746,314,731,340,719,373,712,400,710,429,713,486,723,538,735,578,730,580,718,539,707,487,704,429,707,400,713,371,727,337,742,311,776,271,813,232,832,207,850,176,865,137,875,103"/>
<area shape="poly" title=" " alt="" coords="870,106,828,144,825,141,866,102"/>
<area shape="rect" title=" " alt="" coords="915,152,983,177"/>
<area shape="poly" title=" " alt="" coords="893,102,931,140,927,144,890,106"/>
<area shape="rect" title=" " alt="" coords="1008,152,1075,177"/>
<area shape="poly" title=" " alt="" coords="907,102,1004,144,1001,149,905,106"/>
<area shape="rect" href="rtimcmd_8h.html" title="Header related to handling of runtime commands received via the notification/service interface." alt="" coords="1163,152,1253,177"/>
<area shape="poly" title=" " alt="" coords="1088,102,1173,143,1171,148,1086,106"/>
<area shape="rect" href="rtimopmap_8h.html" title="Header defining the runtime commands available through the notification/service interface." alt="" coords="1272,225,1379,251"/>
<area shape="poly" title=" " alt="" coords="1228,175,1296,216,1293,220,1225,180"/>
<area shape="rect" href="taskdb_8h.html" title="Header defining the central Task Data Structure and related types/functions." alt="" coords="1169,225,1247,251"/>
<area shape="poly" title=" " alt="" coords="1211,178,1211,212,1205,212,1205,178"/>
<area shape="poly" title=" " alt="" coords="1218,249,1248,305,1261,343,1267,383,1267,460,1262,488,1250,513,1231,534,1207,552,1153,579,1101,595,1099,590,1151,574,1204,547,1227,530,1245,510,1257,486,1261,459,1261,384,1256,344,1243,307,1213,252"/>
<area shape="rect" title=" " alt="" coords="1302,299,1386,324"/>
<area shape="poly" title=" " alt="" coords="1231,248,1311,290,1309,295,1229,253"/>
<area shape="rect" href="task_8h.html" title="Header defining the data structures belonging to a single task and related functions." alt="" coords="907,299,970,324"/>
<area shape="poly" title=" " alt="" coords="1169,252,984,301,982,296,1168,247"/>
<area shape="poly" title=" " alt="" coords="914,326,820,369,818,364,912,322"/>
<area shape="poly" title=" " alt="" coords="971,319,1038,341,1068,355,1086,370,1094,388,1098,406,1092,444,1076,480,1058,509,1054,506,1072,477,1087,443,1092,406,1089,389,1082,374,1065,360,1036,346,969,324"/>
<area shape="poly" title=" " alt="" coords="971,319,1134,366,1133,371,969,324"/>
<area shape="poly" title=" " alt="" coords="929,326,905,358,899,377,900,397,909,416,922,433,917,437,905,419,895,398,893,376,901,355,924,323"/>
<area shape="rect" title=" " alt="" coords="1008,372,1072,397"/>
<area shape="poly" title=" " alt="" coords="956,322,1014,362,1011,366,953,326"/>
<area shape="rect" href="ioredir_8h.html" title="Header related to IO redirection types and functions." alt="" coords="909,372,984,397"/>
<area shape="poly" title=" " alt="" coords="943,324,947,358,941,359,937,325"/>
<area shape="poly" title=" " alt="" coords="948,398,945,432,940,432,943,397"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a401b4fb219a4a9c06be75e9574aa4112" id="r_a401b4fb219a4a9c06be75e9574aa4112"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a>&#160;&#160;&#160;<a class="el" href="globopt_8h.html#ae2f56eddaae92fcd90a2b689709bf421">__attribute__</a>((visibility(&quot;default&quot;)))</td></tr>
<tr class="separator:a401b4fb219a4a9c06be75e9574aa4112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a365105a7faf11182019a7ad2915c052d" id="r_a365105a7faf11182019a7ad2915c052d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a365105a7faf11182019a7ad2915c052d">CRINIT_LIB_CONSTRUCTOR</a>&#160;&#160;&#160;<a class="el" href="globopt_8h.html#ae2f56eddaae92fcd90a2b689709bf421">__attribute__</a>((constructor))</td></tr>
<tr class="separator:a365105a7faf11182019a7ad2915c052d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace5267cab7e84da5932edaa5e28a47a5" id="r_ace5267cab7e84da5932edaa5e28a47a5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#ace5267cab7e84da5932edaa5e28a47a5">CRINIT_LIB_DESTRUCTOR</a>&#160;&#160;&#160;<a class="el" href="globopt_8h.html#ae2f56eddaae92fcd90a2b689709bf421">__attribute__</a>((destructor))</td></tr>
<tr class="separator:ace5267cab7e84da5932edaa5e28a47a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af53aedebe6286a721fa08668f349f857" id="r_af53aedebe6286a721fa08668f349f857"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#af53aedebe6286a721fa08668f349f857">CRINIT_ENV_NOTIFY_NAME_UNDEF</a>&#160;&#160;&#160;&quot;@undefined&quot;</td></tr>
<tr class="separator:af53aedebe6286a721fa08668f349f857"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2639b00f2c29457bf31e1ae15b964f66" id="r_a2639b00f2c29457bf31e1ae15b964f66"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a2639b00f2c29457bf31e1ae15b964f66">crinitResponseCheck</a> (const <a class="el" href="structcrinitRtimCmd__t.html">crinitRtimCmd_t</a> *res, <a class="el" href="rtimopmap_8h.html#a6d4799b1d4518c83bc4b049ccf0aaedc">crinitRtimOp_t</a> resCode)</td></tr>
<tr class="separator:a2639b00f2c29457bf31e1ae15b964f66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a3dc7b3e82bb42da07e17d3160db9db" id="r_a6a3dc7b3e82bb42da07e17d3160db9db"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="crinit-client_8c.html#a365105a7faf11182019a7ad2915c052d">CRINIT_LIB_CONSTRUCTOR</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a6a3dc7b3e82bb42da07e17d3160db9db">crinitLibInit</a> (void)</td></tr>
<tr class="separator:a6a3dc7b3e82bb42da07e17d3160db9db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0ea97b24424f6eb9f7a2ccae2c87d07" id="r_aa0ea97b24424f6eb9f7a2ccae2c87d07"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="crinit-client_8c.html#ace5267cab7e84da5932edaa5e28a47a5">CRINIT_LIB_DESTRUCTOR</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#aa0ea97b24424f6eb9f7a2ccae2c87d07">crinitLibDestroy</a> (void)</td></tr>
<tr class="separator:aa0ea97b24424f6eb9f7a2ccae2c87d07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2ea7b82f71b34fa33a74cc69c82427c" id="r_af2ea7b82f71b34fa33a74cc69c82427c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#af2ea7b82f71b34fa33a74cc69c82427c">crinitClientSetVerbose</a> (bool v)</td></tr>
<tr class="separator:af2ea7b82f71b34fa33a74cc69c82427c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8f8de37edfea971b9828cf6c375ae15" id="r_ad8f8de37edfea971b9828cf6c375ae15"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#ad8f8de37edfea971b9828cf6c375ae15">crinitClientSetErrStream</a> (FILE *errStream)</td></tr>
<tr class="separator:ad8f8de37edfea971b9828cf6c375ae15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaf1d3174db327e193e6898ae5a82905" id="r_acaf1d3174db327e193e6898ae5a82905"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#acaf1d3174db327e193e6898ae5a82905">crinitClientSetInfoStream</a> (FILE *infoStream)</td></tr>
<tr class="separator:acaf1d3174db327e193e6898ae5a82905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5601be32c6829aca757349630bf5eac9" id="r_a5601be32c6829aca757349630bf5eac9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a5601be32c6829aca757349630bf5eac9">crinitClientSetNotifyTaskName</a> (const char *taskName)</td></tr>
<tr class="separator:a5601be32c6829aca757349630bf5eac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b980b94e8b7235c9d12ac511368b0dd" id="r_a1b980b94e8b7235c9d12ac511368b0dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a1b980b94e8b7235c9d12ac511368b0dd">crinitClientSetSocketPath</a> (const char *sockFile)</td></tr>
<tr class="separator:a1b980b94e8b7235c9d12ac511368b0dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4dfc9f62b452c1611ff0a21aa6b4cd1" id="r_ad4dfc9f62b452c1611ff0a21aa6b4cd1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> const <a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#ad4dfc9f62b452c1611ff0a21aa6b4cd1">crinitClientLibGetVersion</a> (void)</td></tr>
<tr class="separator:ad4dfc9f62b452c1611ff0a21aa6b4cd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fefeba7a71824e0b7058c4f59b56dbc" id="r_a4fefeba7a71824e0b7058c4f59b56dbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a4fefeba7a71824e0b7058c4f59b56dbc">sd_notify</a> (int unset_environment, const char *state)</td></tr>
<tr class="separator:a4fefeba7a71824e0b7058c4f59b56dbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66a0a7eab2619b01336a58940deaa603" id="r_a66a0a7eab2619b01336a58940deaa603"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a66a0a7eab2619b01336a58940deaa603">sd_notifyf</a> (int unset_environment, const char *format,...)</td></tr>
<tr class="separator:a66a0a7eab2619b01336a58940deaa603"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5195317c14d18e8cc98cc8a4859f3e73" id="r_a5195317c14d18e8cc98cc8a4859f3e73"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a5195317c14d18e8cc98cc8a4859f3e73">crinitClientTaskAdd</a> (const char *configFilePath, bool overwrite, const char *forceDeps)</td></tr>
<tr class="separator:a5195317c14d18e8cc98cc8a4859f3e73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4cd80e1a8664f542147ca98e50fc144" id="r_ae4cd80e1a8664f542147ca98e50fc144"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#ae4cd80e1a8664f542147ca98e50fc144">crinitClientSeriesAdd</a> (const char *seriesFilePath, bool overwriteTasks)</td></tr>
<tr class="separator:ae4cd80e1a8664f542147ca98e50fc144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d42a8c4852c3feff51675b673a1b4f5" id="r_a1d42a8c4852c3feff51675b673a1b4f5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a1d42a8c4852c3feff51675b673a1b4f5">crinitClientTaskEnable</a> (const char *taskName)</td></tr>
<tr class="separator:a1d42a8c4852c3feff51675b673a1b4f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabffdfa6f85292b598c5fea7d0c6c1b3" id="r_aabffdfa6f85292b598c5fea7d0c6c1b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#aabffdfa6f85292b598c5fea7d0c6c1b3">crinitClientTaskDisable</a> (const char *taskName)</td></tr>
<tr class="separator:aabffdfa6f85292b598c5fea7d0c6c1b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9969129491f3ee25b09a8c6afb7742a6" id="r_a9969129491f3ee25b09a8c6afb7742a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a9969129491f3ee25b09a8c6afb7742a6">crinitClientTaskStop</a> (const char *taskName)</td></tr>
<tr class="separator:a9969129491f3ee25b09a8c6afb7742a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa87a3d7a8bcf2891ccfb7ff92455f7c" id="r_aaa87a3d7a8bcf2891ccfb7ff92455f7c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#aaa87a3d7a8bcf2891ccfb7ff92455f7c">crinitClientTaskKill</a> (const char *taskName)</td></tr>
<tr class="separator:aaa87a3d7a8bcf2891ccfb7ff92455f7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbe64f2aa93650bfd4c482b05a73627f" id="r_acbe64f2aa93650bfd4c482b05a73627f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#acbe64f2aa93650bfd4c482b05a73627f">crinitClientTaskRestart</a> (const char *taskName)</td></tr>
<tr class="separator:acbe64f2aa93650bfd4c482b05a73627f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1da2f158b9e7408aef73626470cdafa3" id="r_a1da2f158b9e7408aef73626470cdafa3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a1da2f158b9e7408aef73626470cdafa3">crinitClientTaskGetStatus</a> (<a class="el" href="crinit-sdefs_8h.html#a96326334c512388a4528407927f1d770">crinitTaskState_t</a> *s, pid_t *pid, struct timespec *ct, struct timespec *st, struct timespec *et, gid_t *gid, uid_t *uid, char **username, char **groupname, const char *taskName)</td></tr>
<tr class="separator:a1da2f158b9e7408aef73626470cdafa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad17cf04e0bc647d6be0e94b7d30bf95" id="r_aad17cf04e0bc647d6be0e94b7d30bf95"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#aad17cf04e0bc647d6be0e94b7d30bf95">crinitClientGetTaskList</a> (<a class="el" href="structcrinitTaskList__t.html">crinitTaskList_t</a> **tlptr)</td></tr>
<tr class="separator:aad17cf04e0bc647d6be0e94b7d30bf95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6d11f338642438e153b55fea0f5a227" id="r_ad6d11f338642438e153b55fea0f5a227"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#ad6d11f338642438e153b55fea0f5a227">crinitClientFreeTaskList</a> (<a class="el" href="structcrinitTaskList__t.html">crinitTaskList_t</a> *tl)</td></tr>
<tr class="separator:ad6d11f338642438e153b55fea0f5a227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cacdb1c965b1563f8d103dbe65e95d8" id="r_a2cacdb1c965b1563f8d103dbe65e95d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a2cacdb1c965b1563f8d103dbe65e95d8">crinitClientShutdown</a> (<a class="el" href="crinit-sdefs_8h.html#a06e6d55c070ebd32aabe402362e845be">crinitShutdownCmd_t</a> sCmd)</td></tr>
<tr class="separator:a2cacdb1c965b1563f8d103dbe65e95d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5be4d924b41a6aa34a8a91f795a15619" id="r_a5be4d924b41a6aa34a8a91f795a15619"><td class="memItemLeft" align="right" valign="top"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a5be4d924b41a6aa34a8a91f795a15619">crinitClientGetVersion</a> (<a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a> *v)</td></tr>
<tr class="separator:a5be4d924b41a6aa34a8a91f795a15619"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a770cc9c912852427d92181bd7e4c38c4" id="r_a770cc9c912852427d92181bd7e4c38c4"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a770cc9c912852427d92181bd7e4c38c4">crinitNotifyName</a> = <a class="el" href="crinit-client_8c.html#af53aedebe6286a721fa08668f349f857">CRINIT_ENV_NOTIFY_NAME_UNDEF</a></td></tr>
<tr class="separator:a770cc9c912852427d92181bd7e4c38c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3601bfedebb116645b2704eea9b7baa6" id="r_a3601bfedebb116645b2704eea9b7baa6"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8c.html#a3601bfedebb116645b2704eea9b7baa6">crinitSockFile</a> = CRINIT_SOCKFILE</td></tr>
<tr class="separator:a3601bfedebb116645b2704eea9b7baa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the crinit-client shared library. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af53aedebe6286a721fa08668f349f857" name="af53aedebe6286a721fa08668f349f857"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af53aedebe6286a721fa08668f349f857">&#9670;&#160;</a></span>CRINIT_ENV_NOTIFY_NAME_UNDEF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRINIT_ENV_NOTIFY_NAME_UNDEF&#160;&#160;&#160;&quot;@undefined&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>String to be used if no task name for <a class="el" href="crinit-client_8c.html#a4fefeba7a71824e0b7058c4f59b56dbc">sd_notify()</a> is currently set. </p>

</div>
</div>
<a id="a365105a7faf11182019a7ad2915c052d" name="a365105a7faf11182019a7ad2915c052d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a365105a7faf11182019a7ad2915c052d">&#9670;&#160;</a></span>CRINIT_LIB_CONSTRUCTOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRINIT_LIB_CONSTRUCTOR&#160;&#160;&#160;<a class="el" href="globopt_8h.html#ae2f56eddaae92fcd90a2b689709bf421">__attribute__</a>((constructor))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attribute macro for a function executed on loading of the shared library. </p>

</div>
</div>
<a id="ace5267cab7e84da5932edaa5e28a47a5" name="ace5267cab7e84da5932edaa5e28a47a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace5267cab7e84da5932edaa5e28a47a5">&#9670;&#160;</a></span>CRINIT_LIB_DESTRUCTOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRINIT_LIB_DESTRUCTOR&#160;&#160;&#160;<a class="el" href="globopt_8h.html#ae2f56eddaae92fcd90a2b689709bf421">__attribute__</a>((destructor))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attribute macro for a function executed on program exit if the shared library has been loaded before. </p>

</div>
</div>
<a id="a401b4fb219a4a9c06be75e9574aa4112" name="a401b4fb219a4a9c06be75e9574aa4112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a401b4fb219a4a9c06be75e9574aa4112">&#9670;&#160;</a></span>CRINIT_LIB_EXPORTED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRINIT_LIB_EXPORTED&#160;&#160;&#160;<a class="el" href="globopt_8h.html#ae2f56eddaae92fcd90a2b689709bf421">__attribute__</a>((visibility(&quot;default&quot;)))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attribute macro for exported/visible functions, used together with -fvisibility=hidden to export only selected functions </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad6d11f338642438e153b55fea0f5a227" name="ad6d11f338642438e153b55fea0f5a227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6d11f338642438e153b55fea0f5a227">&#9670;&#160;</a></span>crinitClientFreeTaskList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> void crinitClientFreeTaskList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcrinitTaskList__t.html">crinitTaskList_t</a> *&#160;</td>
          <td class="paramname"><em>tl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free the list of tasks obtained from <a class="el" href="crinit-client_8h.html#a8a3a4440c521fddba8574e4b8c051240">crinitClientGetTaskList()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tl</td><td>The list of tasks. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aad17cf04e0bc647d6be0e94b7d30bf95" name="aad17cf04e0bc647d6be0e94b7d30bf95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad17cf04e0bc647d6be0e94b7d30bf95">&#9670;&#160;</a></span>crinitClientGetTaskList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int crinitClientGetTaskList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcrinitTaskList__t.html">crinitTaskList_t</a> **&#160;</td>
          <td class="paramname"><em>tl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request Crinit to report the list of task names from its TaskDB.</p>
<p>The returned object should be freed with <a class="el" href="crinit-client_8h.html#a64df7c58a99a976d586f531bf15cd16b">crinitClientFreeTaskList()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tl</td><td>Return pointer for the list of tasks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="a5be4d924b41a6aa34a8a91f795a15619" name="a5be4d924b41a6aa34a8a91f795a15619"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5be4d924b41a6aa34a8a91f795a15619">&#9670;&#160;</a></span>crinitClientGetVersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int crinitClientGetVersion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a> *&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Queries the version of the crinit daemon.</p>
<p>See also <a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a>. Depending on the build environment, <a class="el" href="structcrinitVersion__t.html#a14ace71d92b57cd4d6e193293e9051ae" title="git commit Hash">crinitVersion_t::git</a> may be an empty string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>Return pointer to an <a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a> in which the crinit daemon's version will be written if the query is successful.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 otherwise </dd></dl>

</div>
</div>
<a id="ad4dfc9f62b452c1611ff0a21aa6b4cd1" name="ad4dfc9f62b452c1611ff0a21aa6b4cd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4dfc9f62b452c1611ff0a21aa6b4cd1">&#9670;&#160;</a></span>crinitClientLibGetVersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> const <a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a> * crinitClientLibGetVersion </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns version information for the crinit-client shared library.</p>
<p>See also <a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a>. Depending on the build environment, <a class="el" href="structcrinitVersion__t.html#a14ace71d92b57cd4d6e193293e9051ae" title="git commit Hash">crinitVersion_t::git</a> may be an empty string.</p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to an <a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a> constant containing this library's version info. </dd></dl>

</div>
</div>
<a id="ae4cd80e1a8664f542147ca98e50fc144" name="ae4cd80e1a8664f542147ca98e50fc144"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4cd80e1a8664f542147ca98e50fc144">&#9670;&#160;</a></span>crinitClientSeriesAdd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int crinitClientSeriesAdd </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>seriesFilePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>overwriteTasks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Requests Crinit to load tasks and options from a series file.</p>
<p>If successful, the task configurations and options in the series file will be loaded same as if the series file was specified on startup. Already loaded tasks from a prior series file or loaded via crinit-ctl with the same names will be overwritten if and only if <em>overwriteTasks</em> is set to <code>true</code>. Otherwise, task name collisions are an error.</p>
<p>Config options from the newly loaded file generally take precedence over the existing values.</p>
<p>Crinit will spawn no new processes during loading of a series file in order to preserve ordering through dependencies.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seriesFilePath</td><td><b>Absolute</b> path to the series file. </td></tr>
    <tr><td class="paramname">overwriteTasks</td><td>If true, tasks with the same name already in the TaskDB will be overwritten.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 otherwise </dd></dl>

</div>
</div>
<a id="ad8f8de37edfea971b9828cf6c375ae15" name="ad8f8de37edfea971b9828cf6c375ae15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8f8de37edfea971b9828cf6c375ae15">&#9670;&#160;</a></span>crinitClientSetErrStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> void crinitClientSetErrStream </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>errStream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Selects the stream on which to output error messages.</p>
<p>By default, the crinit-client library will output error messages to stderr specifying where a failure occurred. This function can be used to pipe them to a logfile instead or to completely suppress them by piping to /dev/null. The stream can be the same as the one used for <a class="el" href="crinit-client_8h.html#ac1c5a8ae37cd47fe02b39843e23598d3">crinitClientSetInfoStream()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">errStream</td><td>The stream to use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acaf1d3174db327e193e6898ae5a82905" name="acaf1d3174db327e193e6898ae5a82905"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaf1d3174db327e193e6898ae5a82905">&#9670;&#160;</a></span>crinitClientSetInfoStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> void crinitClientSetInfoStream </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>infoStream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Selects the stream on which to output (debug) information messages.</p>
<p>By default, the crinit-client library will output debug information messages to stdout if activated by <a class="el" href="crinit-client_8h.html#a6bef26ee9ac132ce2f088d19397fba14">crinitClientSetVerbose()</a>. This function can be used to pipe them to a logfile instead. The stream can be the same as the one used for <a class="el" href="crinit-client_8h.html#ac1c5a8ae37cd47fe02b39843e23598d3">crinitClientSetInfoStream()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">infoStream</td><td>The stream to use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5601be32c6829aca757349630bf5eac9" name="a5601be32c6829aca757349630bf5eac9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5601be32c6829aca757349630bf5eac9">&#9670;&#160;</a></span>crinitClientSetNotifyTaskName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> void crinitClientSetNotifyTaskName </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the task name reported to Crinit by <a class="el" href="crinit-client_8h.html#a552af1307248625831adbd656e3c4e17">sd_notify()</a>.</p>
<p>The default is set via the environment variable specified by <a class="el" href="crinit-sdefs_8h.html#a8a70a653993cfb028af1bc1c1f72b8b6">CRINIT_ENV_NOTIFY_NAME</a> if it is present.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskName</td><td>The task name to use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1b980b94e8b7235c9d12ac511368b0dd" name="a1b980b94e8b7235c9d12ac511368b0dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b980b94e8b7235c9d12ac511368b0dd">&#9670;&#160;</a></span>crinitClientSetSocketPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> void crinitClientSetSocketPath </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sockFile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the path to Crinit's AF_UNIX communication socket.</p>
<p>The default is set at library compile-time via the CMake <code>CRINIT_SOCKFILE</code> setting.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sockFile</td><td>Path to the socket file. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af2ea7b82f71b34fa33a74cc69c82427c" name="af2ea7b82f71b34fa33a74cc69c82427c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2ea7b82f71b34fa33a74cc69c82427c">&#9670;&#160;</a></span>crinitClientSetVerbose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int crinitClientSetVerbose </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Turns debug output on or off.</p>
<p>The default is no debug output.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>If there should be debug output (YES==true). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2cacdb1c965b1563f8d103dbe65e95d8" name="a2cacdb1c965b1563f8d103dbe65e95d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cacdb1c965b1563f8d103dbe65e95d8">&#9670;&#160;</a></span>crinitClientShutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int crinitClientShutdown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="crinit-sdefs_8h.html#a06e6d55c070ebd32aabe402362e845be">crinitShutdownCmd_t</a>&#160;</td>
          <td class="paramname"><em>sCmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request Crinit to initiate an immediate shutdown or reboot.</p>
<p>Calling process must have the CAP_SYS_BOOT capability or Crinit will refuse with "Permission denied." Before issuing the shutdown or reboot syscall, Crinit will send SIGCONT+SIGTERM to all processes, wait a grace period (which can be set in the main series config file as <code>SHUTDOWN_GRACE_PERIOD_US = &lt;microseconds&gt;</code>), send SIGKILL to remaining processes, detach or read-only-remount all filesystems, and finally call sync().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sCmd</td><td>The shutdown command to be performed, either CRINIT_SHD_POWEROFF (for poweroff) or CRINIT_SHD_POWEROFF (for reboot).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="a5195317c14d18e8cc98cc8a4859f3e73" name="a5195317c14d18e8cc98cc8a4859f3e73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5195317c14d18e8cc98cc8a4859f3e73">&#9670;&#160;</a></span>crinitClientTaskAdd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int crinitClientTaskAdd </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>configFilePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>overwrite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>forceDeps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Requests Crinit to add a task from a given task config.</p>
<p>If successful, the given task configuration will be parsed and added to the TaskDB. Task execution takes place once all dependencies have been fulfilled, as with pre-loaded tasks.</p>
<p>Using <em>forceDeps</em>, it is possible to specify a DEPENDS value which overrides the one in the configuration file. An empty string will cause the task to be started immediately. Specifying <code>@ctl:enable</code> will let the task wait for <a class="el" href="crinit-client_8h.html#a83f876629b669304313ab5adf676e46b">crinitClientTaskEnable()</a>. If the dependencies from the task config file should be used, <em>forceDeps</em> must be <code>NULL</code> or <code>"@unchanged"</code>.</p>
<p>Note, that Crinit does not keep track of already fulfilled dependencies, i.e. in order to not be blocked forever a task configuration must only contain dependencies which will be fulfilled <b>in the future</b>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">configFilePath</td><td><b>Absolute</b> path to the task configuration file. </td></tr>
    <tr><td class="paramname">overwrite</td><td>If an existing task with the same name should be overwritten (==true). Otherwise Crinit would return an error in this case. </td></tr>
    <tr><td class="paramname">forceDeps</td><td>String to override the value of DEPENDS in the config file, can be "" for no dependencies (immediate start), an arbitrary list of dependencies, or <code>NULL</code>/<code>"@unchanged"</code> to keep the dependencies in the config.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 otherwise </dd></dl>

</div>
</div>
<a id="aabffdfa6f85292b598c5fea7d0c6c1b3" name="aabffdfa6f85292b598c5fea7d0c6c1b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabffdfa6f85292b598c5fea7d0c6c1b3">&#9670;&#160;</a></span>crinitClientTaskDisable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int crinitClientTaskDisable </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Requests Crinit to add the dependency <code>"@ctl:enable"</code> to a specific task.</p>
<p>This can be used in tandem with <a class="el" href="crinit-client_8h.html#a83f876629b669304313ab5adf676e46b">crinitClientTaskEnable()</a> to implement starting on command.</p>
<p>Note, that this function can also be used to prevent tasks with the <code>RESPAWN</code> option set to <code>YES</code> from respawning, temporarily or permanently.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskName</td><td>The name of the task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="a1d42a8c4852c3feff51675b673a1b4f5" name="a1d42a8c4852c3feff51675b673a1b4f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d42a8c4852c3feff51675b673a1b4f5">&#9670;&#160;</a></span>crinitClientTaskEnable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int crinitClientTaskEnable </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Requests Crinit to remove the dependency <code>"@ctl:enable"</code> from a specific task.</p>
<p>This can be used in tandem with <a class="el" href="crinit-client_8h.html#a0121643b941198a60340f797042fd902">crinitClientTaskDisable()</a> or config files which already contain the above dependency to implement starting on command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskName</td><td>The name of the task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="a1da2f158b9e7408aef73626470cdafa3" name="a1da2f158b9e7408aef73626470cdafa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1da2f158b9e7408aef73626470cdafa3">&#9670;&#160;</a></span>crinitClientTaskGetStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int crinitClientTaskGetStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="crinit-sdefs_8h.html#a96326334c512388a4528407927f1d770">crinitTaskState_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t *&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timespec *&#160;</td>
          <td class="paramname"><em>ct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timespec *&#160;</td>
          <td class="paramname"><em>st</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timespec *&#160;</td>
          <td class="paramname"><em>et</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gid_t *&#160;</td>
          <td class="paramname"><em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uid_t *&#160;</td>
          <td class="paramname"><em>uid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>groupname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request Crinit to report the current state, PID, and timestamps of a task from its TaskDB.</p>
<p>Timestamps of events that have not yet happened are always <code>{0,0}</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>Return pointer for the task's state. </td></tr>
    <tr><td class="paramname">pid</td><td>Return pointer for the task's PID. </td></tr>
    <tr><td class="paramname">ct</td><td>The time when the task was created (loaded/parsed). </td></tr>
    <tr><td class="paramname">st</td><td>The time when the task was last started (i.e. became running). </td></tr>
    <tr><td class="paramname">et</td><td>The time when the task last ended (i.e. failed or was done). </td></tr>
    <tr><td class="paramname">gid</td><td>Return pointer for the task's GID. </td></tr>
    <tr><td class="paramname">uid</td><td>Return pointer for the task's UID. </td></tr>
    <tr><td class="paramname">groupname</td><td>Return pointer for the task's groupname. </td></tr>
    <tr><td class="paramname">username</td><td>Return pointer for the task's username. </td></tr>
    <tr><td class="paramname">taskName</td><td>The name of the task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="aaa87a3d7a8bcf2891ccfb7ff92455f7c" name="aaa87a3d7a8bcf2891ccfb7ff92455f7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa87a3d7a8bcf2891ccfb7ff92455f7c">&#9670;&#160;</a></span>crinitClientTaskKill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int crinitClientTaskKill </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request Crinit to send SIGKILL to a task process.</p>
<p>Will only send a signal if a corresponding PID has been saved in the TaskDB, either through <a class="el" href="crinit-client_8h.html#a552af1307248625831adbd656e3c4e17">sd_notify()</a> or the Process Dispatcher during process start.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskName</td><td>The name of the task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="acbe64f2aa93650bfd4c482b05a73627f" name="acbe64f2aa93650bfd4c482b05a73627f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbe64f2aa93650bfd4c482b05a73627f">&#9670;&#160;</a></span>crinitClientTaskRestart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int crinitClientTaskRestart </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request Crinit to reset the state of a task within the TaskDB.</p>
<p>State will be reset to 0 it is currently <a class="el" href="crinit-sdefs_8h.html#ae2c25b39f02dab5aba41cbbafcff876a" title="Bitmask indicating a task has finished without error.">CRINIT_TASK_STATE_DONE</a> or <a class="el" href="crinit-sdefs_8h.html#a0d9c49d0bab264f769bf49414a6cecec" title="Bitmask indicating a task has finished with an error code.">CRINIT_TASK_STATE_FAILED</a>. If the task has no unfulfilled dependencies, this will cause an immediate restart.</p>
<p>Note, that the semantics are different than with e.g. <code>systemctl restart</code>. To get equivalent behaviour, i.e. restart a task that is currently running, a possibility is a call to <a class="el" href="crinit-client_8h.html#a85cfc802eeed2ac4a57b8e7f5de9193e">crinitClientTaskStop()</a> followed by a call to this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskName</td><td>The name of the task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="a9969129491f3ee25b09a8c6afb7742a6" name="a9969129491f3ee25b09a8c6afb7742a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9969129491f3ee25b09a8c6afb7742a6">&#9670;&#160;</a></span>crinitClientTaskStop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int crinitClientTaskStop </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request Crinit to stop a task. This will either result in the corresponding <code>STOP_COMMAND</code> being executed or, if no <code>STOP_COMMAND</code> is defined, a SIGTERM being sent to the currently running task process.</p>
<p>Crinit will only send a SIGTERM if a corresponding PID is known, either through <a class="el" href="crinit-client_8h.html#a552af1307248625831adbd656e3c4e17">sd_notify()</a> or the Process Dispatcher during process start.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskName</td><td>The name of the task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="aa0ea97b24424f6eb9f7a2ccae2c87d07" name="aa0ea97b24424f6eb9f7a2ccae2c87d07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0ea97b24424f6eb9f7a2ccae2c87d07">&#9670;&#160;</a></span>crinitLibDestroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="crinit-client_8c.html#ace5267cab7e84da5932edaa5e28a47a5">CRINIT_LIB_DESTRUCTOR</a> void crinitLibDestroy </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Library cleanup function.</p>
<p>Gets called on program end through <a class="el" href="crinit-client_8c.html#ace5267cab7e84da5932edaa5e28a47a5">CRINIT_LIB_DESTRUCTOR</a> attribute if the shared library was loaded. Frees global option memory allocated as a consequence of <a class="el" href="crinit-client_8c.html#a6a3dc7b3e82bb42da07e17d3160db9db">crinitLibInit()</a>. </p>

</div>
</div>
<a id="a6a3dc7b3e82bb42da07e17d3160db9db" name="a6a3dc7b3e82bb42da07e17d3160db9db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a3dc7b3e82bb42da07e17d3160db9db">&#9670;&#160;</a></span>crinitLibInit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="crinit-client_8c.html#a365105a7faf11182019a7ad2915c052d">CRINIT_LIB_CONSTRUCTOR</a> void crinitLibInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Library initialization function.</p>
<p>Gets called on shared object loading through <a class="el" href="crinit-client_8c.html#a365105a7faf11182019a7ad2915c052d">CRINIT_LIB_CONSTRUCTOR</a> attribute. Initializes options to default values and tries to get the task name for <a class="el" href="crinit-client_8c.html#a4fefeba7a71824e0b7058c4f59b56dbc">sd_notify()</a> from the environment if it is present. </p>

</div>
</div>
<a id="a2639b00f2c29457bf31e1ae15b964f66" name="a2639b00f2c29457bf31e1ae15b964f66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2639b00f2c29457bf31e1ae15b964f66">&#9670;&#160;</a></span>crinitResponseCheck()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int crinitResponseCheck </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcrinitRtimCmd__t.html">crinitRtimCmd_t</a> *&#160;</td>
          <td class="paramname"><em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rtimopmap_8h.html#a6d4799b1d4518c83bc4b049ccf0aaedc">crinitRtimOp_t</a>&#160;</td>
          <td class="paramname"><em>resCode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check if a response from Crinit is valid and/or an error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">res</td><td>The response to check. </td></tr>
    <tr><td class="paramname">resCode</td><td>The expected response opcode.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if <em>res</em> is valid and indicates success, -1 if not </dd></dl>

</div>
</div>
<a id="a4fefeba7a71824e0b7058c4f59b56dbc" name="a4fefeba7a71824e0b7058c4f59b56dbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fefeba7a71824e0b7058c4f59b56dbc">&#9670;&#160;</a></span>sd_notify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int sd_notify </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>unset_environment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notifies Crinit of task state changes.</p>
<p>Partially implements the SD_NOTIFY interface of systemd. Specifically, the commands READY and MAINPID are supported. Others are currently unimplemented and will be ignored. The <em>unset_environment</em> argument is also unimplemented, i.e. the environment will not be unset. If <em>unset_environment</em> is not 0, a warning will be printed.</p>
<p>READY=1 lets Crinit know the task is currently running. MAINPID=[pid] tells Crinit its PID. Delimiting character is a newline.</p>
<p>Example: <code>"READY=1\nMAINPID=42"</code> will update the task's state to <a class="el" href="crinit-sdefs_8h.html#a72eb539da91c6a7a1081f5df68ce700b" title="Bitmask indicating the task has spawned a process and is running.">CRINIT_TASK_STATE_RUNNING</a> and its PID to 42.</p>
<p>For more information regarding the use cases of this interface, refer to the official SD_NOTIFY documentation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">unset_environment</td><td>Unimplemented, should be set to 0. </td></tr>
    <tr><td class="paramname">state</td><td>SD_NOTIFY string. A newline-separated list of commands, as in the above example.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 otherwise </dd></dl>

</div>
</div>
<a id="a66a0a7eab2619b01336a58940deaa603" name="a66a0a7eab2619b01336a58940deaa603"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66a0a7eab2619b01336a58940deaa603">&#9670;&#160;</a></span>sd_notifyf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crinit-client_8c.html#a401b4fb219a4a9c06be75e9574aa4112">CRINIT_LIB_EXPORTED</a> int sd_notifyf </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>unset_environment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notifies Crinit of task state changes.</p>
<p>Like <a class="el" href="crinit-client_8h.html#a552af1307248625831adbd656e3c4e17">sd_notify()</a> but uses printf-style formatting for the input string. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a770cc9c912852427d92181bd7e4c38c4" name="a770cc9c912852427d92181bd7e4c38c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a770cc9c912852427d92181bd7e4c38c4">&#9670;&#160;</a></span>crinitNotifyName</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* crinitNotifyName = <a class="el" href="crinit-client_8c.html#af53aedebe6286a721fa08668f349f857">CRINIT_ENV_NOTIFY_NAME_UNDEF</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Holds the task name for <a class="el" href="crinit-client_8c.html#a4fefeba7a71824e0b7058c4f59b56dbc">sd_notify()</a> </p>

</div>
</div>
<a id="a3601bfedebb116645b2704eea9b7baa6" name="a3601bfedebb116645b2704eea9b7baa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3601bfedebb116645b2704eea9b7baa6">&#9670;&#160;</a></span>crinitSockFile</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* crinitSockFile = CRINIT_SOCKFILE</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Holds the path to the Crinit AF_UNIX socket file </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="crinit-client_8c.html">crinit-client.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
