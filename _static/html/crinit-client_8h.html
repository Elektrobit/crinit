<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Crinit -- Configurable Rootfs Init: inc/crinit-client.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Crinit -- Configurable Rootfs Init
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('crinit-client_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">crinit-client.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<h3 class="version">(/usr/bin/git
2025-03-14, commit: 3f3d877)</h3>
<p>Public definitions/declarations for using the crinit-client shared library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;bits/types/FILE.h&gt;</code><br />
<code>#include &lt;sched.h&gt;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;<a class="el" href="crinit-sdefs_8h_source.html">crinit-sdefs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="version_8h_source.html">version.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for crinit-client.h:</div>
<div class="dyncontent">
<div class="center"><img src="crinit-client_8h__incl.png" border="0" usemap="#ainc_2crinit-client_8h" alt=""/></div>
<map name="ainc_2crinit-client_8h" id="ainc_2crinit-client_8h">
<area shape="rect" title="Public definitions/declarations for using the crinit&#45;client shared library." alt="" coords="278,5,409,31"/>
<area shape="rect" title=" " alt="" coords="5,79,135,104"/>
<area shape="poly" title=" " alt="" coords="300,33,128,78,127,73,299,28"/>
<area shape="rect" title=" " alt="" coords="159,79,231,104"/>
<area shape="poly" title=" " alt="" coords="321,33,233,75,231,70,318,28"/>
<area shape="rect" title=" " alt="" coords="255,79,330,104"/>
<area shape="poly" title=" " alt="" coords="337,33,311,69,307,66,333,29"/>
<area shape="rect" title=" " alt="" coords="354,79,437,104"/>
<area shape="poly" title=" " alt="" coords="354,29,381,66,377,69,350,33"/>
<area shape="rect" href="crinit-sdefs_8h.html" title="Definitions shared between crinit&#39;s public and internal APIs." alt="" coords="461,79,567,104"/>
<area shape="poly" title=" " alt="" coords="372,28,475,71,473,76,370,33"/>
<area shape="rect" href="version_8h.html" title="Header definitions related to component versioning." alt="" coords="591,79,674,104"/>
<area shape="poly" title=" " alt="" coords="390,28,578,74,577,79,389,33"/>
<area shape="rect" title=" " alt="" coords="466,152,562,177"/>
<area shape="poly" title=" " alt="" coords="517,104,517,138,511,138,511,104"/>
<area shape="rect" title=" " alt="" coords="597,152,668,177"/>
<area shape="poly" title=" " alt="" coords="635,104,635,138,630,138,630,104"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="crinit-client_8h__dep__incl.png" border="0" usemap="#ainc_2crinit-client_8hdep" alt=""/></div>
<map name="ainc_2crinit-client_8hdep" id="ainc_2crinit-client_8hdep">
<area shape="rect" title="Public definitions/declarations for using the crinit&#45;client shared library." alt="" coords="1393,5,1524,31"/>
<area shape="rect" href="crinit-client_8c.html" title="Implementation of the crinit&#45;client shared library." alt="" coords="5,93,136,119"/>
<area shape="poly" title=" " alt="" coords="1380,23,1117,27,761,36,407,54,260,66,149,81,99,96,98,91,147,76,259,61,406,48,761,31,1117,21,1380,17"/>
<area shape="rect" href="crinit-ctl_8c.html" title="Implementation of the crinit&#45;ctl service program using the crinit&#45;client library." alt="" coords="161,93,271,119"/>
<area shape="poly" title=" " alt="" coords="1380,23,1142,27,825,36,511,54,381,66,283,81,241,96,239,91,282,76,380,61,510,48,824,31,1142,21,1380,17"/>
<area shape="rect" href="utest-crinit-set-err-stream_2case-set_8c.html" title="Implementation of a unit test for crinitClientSetErrStream()." alt="" coords="295,86,486,126"/>
<area shape="poly" title=" " alt="" coords="1380,22,1218,25,999,34,749,52,498,81,460,89,459,83,497,76,749,46,998,28,1218,20,1380,17"/>
<area shape="rect" href="utest-crinit-set-info-stream_2case-set_8c.html" title="Implementation of a unit test for crinitClientSetInfoStream()." alt="" coords="510,86,709,126"/>
<area shape="poly" title=" " alt="" coords="1380,25,1089,41,906,58,722,81,684,89,683,83,721,76,905,52,1089,36,1380,19"/>
<area shape="rect" href="case-glob-opt-error_8c.html" title="Implementation of a unit test for crinitClientSetVerbose() with the assumption crinitGlobOptSet() fai..." alt="" coords="733,79,904,133"/>
<area shape="poly" title=" " alt="" coords="1380,27,1169,45,1043,61,916,81,905,84,904,78,916,76,1042,56,1169,40,1379,22"/>
<area shape="rect" href="utest-crinit-set-verbose_2case-success_8c.html" title="Implementation of a unit test for crinitClientSetVerbose(), under the assumption no internal function..." alt="" coords="929,86,1133,126"/>
<area shape="poly" title=" " alt="" coords="1382,36,1146,81,1112,89,1111,83,1145,76,1381,31"/>
<area shape="rect" href="case-build-rtim-cmd-error_8c.html" title="Unit test for crinitClientTaskAdd() testing error handling for crinitBuildRtimCmd()." alt="" coords="1157,79,1344,133"/>
<area shape="poly" title=" " alt="" coords="1419,38,1315,81,1313,76,1417,33"/>
<area shape="rect" href="case-confpath-null_8c.html" title="Unit test for crinitClientTaskAdd() with confFilePath as NULL." alt="" coords="1369,79,1549,133"/>
<area shape="poly" title=" " alt="" coords="1461,44,1461,79,1456,79,1456,44"/>
<area shape="rect" href="case-crinit-response-cmd-error_8c.html" title="Unit test for crinitClientTaskAdd() testing error handling for wrong command in response." alt="" coords="1573,79,1739,133"/>
<area shape="poly" title=" " alt="" coords="1499,34,1597,76,1595,81,1497,39"/>
<area shape="rect" href="case-crinit-response-code-error_8c.html" title="Unit test for crinitClientTaskAdd() testing error handling for error code response." alt="" coords="1763,79,1931,133"/>
<area shape="poly" title=" " alt="" coords="1534,31,1751,76,1763,79,1762,84,1750,81,1533,36"/>
<area shape="rect" href="case-crinit-xfer-error_8c.html" title=" " alt="" coords="1955,79,2114,133"/>
<area shape="poly" title=" " alt="" coords="1538,23,1724,42,1834,57,1943,76,1956,79,1954,84,1942,81,1833,62,1723,47,1538,28"/>
<area shape="rect" href="case-forcedeps-empty_8c.html" title="Unit test for crinitClientTaskAdd() with forceDeps as empty string." alt="" coords="2139,79,2325,133"/>
<area shape="poly" title=" " alt="" coords="1538,20,1800,37,1964,53,2127,76,2139,78,2138,83,2126,81,1963,58,1800,42,1537,25"/>
<area shape="rect" href="case-forcedeps-null_8c.html" title="Unit test for crinitClientTaskAdd() with forceDeps as NULL." alt="" coords="2349,79,2536,133"/>
<area shape="poly" title=" " alt="" coords="1538,17,1687,21,1886,31,2111,48,2338,76,2350,78,2349,83,2337,81,2110,53,1886,36,1686,26,1538,23"/>
<area shape="rect" href="case-overwrite-bool-to-string_8c.html" title="Unit test for crinitClientTaskAdd() testing overwrite is passed on correctly." alt="" coords="2561,79,2746,133"/>
<area shape="poly" title=" " alt="" coords="1538,16,1719,17,1970,25,2257,43,2405,57,2548,76,2561,78,2560,83,2548,81,2404,63,2257,48,1970,30,1719,22,1538,21"/>
<area shape="rect" href="utest-crinit-task-add_2case-success_8c.html" title="Unit test for crinitClientTaskAdd() testing error handling for crinitXfer()." alt="" coords="2770,86,2955,126"/>
<area shape="poly" title=" " alt="" coords="1538,18,2151,36,2502,53,2648,64,2759,76,2796,83,2795,89,2758,81,2648,69,2502,58,2151,41,1538,24"/>
</map>
</div>
</div>
<p><a href="crinit-client_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a07a160d8a3f24217aee77ee1a977cace" id="r_a07a160d8a3f24217aee77ee1a977cace"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#a07a160d8a3f24217aee77ee1a977cace">crinitClientSetErrStream</a> (FILE *errStream)</td></tr>
<tr class="separator:a07a160d8a3f24217aee77ee1a977cace"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1c5a8ae37cd47fe02b39843e23598d3" id="r_ac1c5a8ae37cd47fe02b39843e23598d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#ac1c5a8ae37cd47fe02b39843e23598d3">crinitClientSetInfoStream</a> (FILE *infoStream)</td></tr>
<tr class="separator:ac1c5a8ae37cd47fe02b39843e23598d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5005da7f0f0cca479993de59d2f99a96" id="r_a5005da7f0f0cca479993de59d2f99a96"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#a5005da7f0f0cca479993de59d2f99a96">crinitClientGetVersion</a> (<a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a> *v)</td></tr>
<tr class="separator:a5005da7f0f0cca479993de59d2f99a96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba180b9a19aa1b7f6105ea9707de2b1f" id="r_aba180b9a19aa1b7f6105ea9707de2b1f"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#aba180b9a19aa1b7f6105ea9707de2b1f">crinitClientLibGetVersion</a> (void)</td></tr>
<tr class="separator:aba180b9a19aa1b7f6105ea9707de2b1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99446d18e5a1cb1fac9075281d0e107b" id="r_a99446d18e5a1cb1fac9075281d0e107b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#a99446d18e5a1cb1fac9075281d0e107b">crinitClientSetNotifyTaskName</a> (const char *taskName)</td></tr>
<tr class="separator:a99446d18e5a1cb1fac9075281d0e107b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a429c3194e39becd83d2b8271edcc7d" id="r_a2a429c3194e39becd83d2b8271edcc7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#a2a429c3194e39becd83d2b8271edcc7d">crinitClientSetSocketPath</a> (const char *sockFile)</td></tr>
<tr class="separator:a2a429c3194e39becd83d2b8271edcc7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bef26ee9ac132ce2f088d19397fba14" id="r_a6bef26ee9ac132ce2f088d19397fba14"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#a6bef26ee9ac132ce2f088d19397fba14">crinitClientSetVerbose</a> (bool v)</td></tr>
<tr class="separator:a6bef26ee9ac132ce2f088d19397fba14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a552af1307248625831adbd656e3c4e17" id="r_a552af1307248625831adbd656e3c4e17"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#a552af1307248625831adbd656e3c4e17">sd_notify</a> (int unset_environment, const char *state)</td></tr>
<tr class="separator:a552af1307248625831adbd656e3c4e17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3f167408ac95348cec086b92f3c694a" id="r_ab3f167408ac95348cec086b92f3c694a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#ab3f167408ac95348cec086b92f3c694a">sd_notifyf</a> (int unset_environment, const char *format,...)</td></tr>
<tr class="separator:ab3f167408ac95348cec086b92f3c694a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b9a8819e0a34c20e29d2c50106565f3" id="r_a2b9a8819e0a34c20e29d2c50106565f3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#a2b9a8819e0a34c20e29d2c50106565f3">crinitClientTaskAdd</a> (const char *configFilePath, bool overwrite, const char *forceDeps)</td></tr>
<tr class="separator:a2b9a8819e0a34c20e29d2c50106565f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ff0a4a1933e638234d39b9ad9cfd7d3" id="r_a9ff0a4a1933e638234d39b9ad9cfd7d3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#a9ff0a4a1933e638234d39b9ad9cfd7d3">crinitClientSeriesAdd</a> (const char *seriesFilePath, bool overwriteTasks)</td></tr>
<tr class="separator:a9ff0a4a1933e638234d39b9ad9cfd7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83f876629b669304313ab5adf676e46b" id="r_a83f876629b669304313ab5adf676e46b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#a83f876629b669304313ab5adf676e46b">crinitClientTaskEnable</a> (const char *taskName)</td></tr>
<tr class="separator:a83f876629b669304313ab5adf676e46b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0121643b941198a60340f797042fd902" id="r_a0121643b941198a60340f797042fd902"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#a0121643b941198a60340f797042fd902">crinitClientTaskDisable</a> (const char *taskName)</td></tr>
<tr class="separator:a0121643b941198a60340f797042fd902"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85cfc802eeed2ac4a57b8e7f5de9193e" id="r_a85cfc802eeed2ac4a57b8e7f5de9193e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#a85cfc802eeed2ac4a57b8e7f5de9193e">crinitClientTaskStop</a> (const char *taskName)</td></tr>
<tr class="separator:a85cfc802eeed2ac4a57b8e7f5de9193e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa58415abb0426a4e0459ca1b9587fa4b" id="r_aa58415abb0426a4e0459ca1b9587fa4b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#aa58415abb0426a4e0459ca1b9587fa4b">crinitClientTaskKill</a> (const char *taskName)</td></tr>
<tr class="separator:aa58415abb0426a4e0459ca1b9587fa4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2caf33cef7ee8fbc1646dcc9fa6c230" id="r_ad2caf33cef7ee8fbc1646dcc9fa6c230"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#ad2caf33cef7ee8fbc1646dcc9fa6c230">crinitClientTaskRestart</a> (const char *taskName)</td></tr>
<tr class="separator:ad2caf33cef7ee8fbc1646dcc9fa6c230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac63ab0a7b48b7cfe401c6ac300a95726" id="r_ac63ab0a7b48b7cfe401c6ac300a95726"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#ac63ab0a7b48b7cfe401c6ac300a95726">crinitClientTaskGetStatus</a> (<a class="el" href="crinit-sdefs_8h.html#a96326334c512388a4528407927f1d770">crinitTaskState_t</a> *s, pid_t *pid, struct timespec *ct, struct timespec *st, struct timespec *et, gid_t *gid, uid_t *uid, char **username, char **groupname, const char *taskName)</td></tr>
<tr class="separator:ac63ab0a7b48b7cfe401c6ac300a95726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a3a4440c521fddba8574e4b8c051240" id="r_a8a3a4440c521fddba8574e4b8c051240"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#a8a3a4440c521fddba8574e4b8c051240">crinitClientGetTaskList</a> (<a class="el" href="structcrinitTaskList__t.html">crinitTaskList_t</a> **tl)</td></tr>
<tr class="separator:a8a3a4440c521fddba8574e4b8c051240"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64df7c58a99a976d586f531bf15cd16b" id="r_a64df7c58a99a976d586f531bf15cd16b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#a64df7c58a99a976d586f531bf15cd16b">crinitClientFreeTaskList</a> (<a class="el" href="structcrinitTaskList__t.html">crinitTaskList_t</a> *tl)</td></tr>
<tr class="separator:a64df7c58a99a976d586f531bf15cd16b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf24c20b8485328c3279154c35923d14" id="r_adf24c20b8485328c3279154c35923d14"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crinit-client_8h.html#adf24c20b8485328c3279154c35923d14">crinitClientShutdown</a> (<a class="el" href="crinit-sdefs_8h.html#a06e6d55c070ebd32aabe402362e845be">crinitShutdownCmd_t</a> sCmd)</td></tr>
<tr class="separator:adf24c20b8485328c3279154c35923d14"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Public definitions/declarations for using the crinit-client shared library. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a64df7c58a99a976d586f531bf15cd16b" name="a64df7c58a99a976d586f531bf15cd16b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64df7c58a99a976d586f531bf15cd16b">&#9670;&#160;</a></span>crinitClientFreeTaskList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void crinitClientFreeTaskList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcrinitTaskList__t.html">crinitTaskList_t</a> *&#160;</td>
          <td class="paramname"><em>tl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free the list of tasks obtained from <a class="el" href="crinit-client_8h.html#a8a3a4440c521fddba8574e4b8c051240">crinitClientGetTaskList()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tl</td><td>The list of tasks. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8a3a4440c521fddba8574e4b8c051240" name="a8a3a4440c521fddba8574e4b8c051240"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a3a4440c521fddba8574e4b8c051240">&#9670;&#160;</a></span>crinitClientGetTaskList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crinitClientGetTaskList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcrinitTaskList__t.html">crinitTaskList_t</a> **&#160;</td>
          <td class="paramname"><em>tl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request Crinit to report the list of task names from its TaskDB.</p>
<p>The returned object should be freed with <a class="el" href="crinit-client_8h.html#a64df7c58a99a976d586f531bf15cd16b">crinitClientFreeTaskList()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tl</td><td>Return pointer for the list of tasks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="a5005da7f0f0cca479993de59d2f99a96" name="a5005da7f0f0cca479993de59d2f99a96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5005da7f0f0cca479993de59d2f99a96">&#9670;&#160;</a></span>crinitClientGetVersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crinitClientGetVersion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a> *&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Queries the version of the crinit daemon.</p>
<p>See also <a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a>. Depending on the build environment, <a class="el" href="structcrinitVersion__t.html#a14ace71d92b57cd4d6e193293e9051ae" title="git commit Hash">crinitVersion_t::git</a> may be an empty string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>Return pointer to an <a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a> in which the crinit daemon's version will be written if the query is successful.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 otherwise </dd></dl>

</div>
</div>
<a id="aba180b9a19aa1b7f6105ea9707de2b1f" name="aba180b9a19aa1b7f6105ea9707de2b1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba180b9a19aa1b7f6105ea9707de2b1f">&#9670;&#160;</a></span>crinitClientLibGetVersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a> * crinitClientLibGetVersion </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns version information for the crinit-client shared library.</p>
<p>See also <a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a>. Depending on the build environment, <a class="el" href="structcrinitVersion__t.html#a14ace71d92b57cd4d6e193293e9051ae" title="git commit Hash">crinitVersion_t::git</a> may be an empty string.</p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to an <a class="el" href="structcrinitVersion__t.html">crinitVersion_t</a> constant containing this library's version info. </dd></dl>

</div>
</div>
<a id="a9ff0a4a1933e638234d39b9ad9cfd7d3" name="a9ff0a4a1933e638234d39b9ad9cfd7d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ff0a4a1933e638234d39b9ad9cfd7d3">&#9670;&#160;</a></span>crinitClientSeriesAdd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crinitClientSeriesAdd </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>seriesFilePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>overwriteTasks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Requests Crinit to load tasks and options from a series file.</p>
<p>If successful, the task configurations and options in the series file will be loaded same as if the series file was specified on startup. Already loaded tasks from a prior series file or loaded via crinit-ctl with the same names will be overwritten if and only if <em>overwriteTasks</em> is set to <code>true</code>. Otherwise, task name collisions are an error.</p>
<p>Config options from the newly loaded file generally take precedence over the existing values.</p>
<p>Crinit will spawn no new processes during loading of a series file in order to preserve ordering through dependencies.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seriesFilePath</td><td><b>Absolute</b> path to the series file. </td></tr>
    <tr><td class="paramname">overwriteTasks</td><td>If true, tasks with the same name already in the TaskDB will be overwritten.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 otherwise </dd></dl>

</div>
</div>
<a id="a07a160d8a3f24217aee77ee1a977cace" name="a07a160d8a3f24217aee77ee1a977cace"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07a160d8a3f24217aee77ee1a977cace">&#9670;&#160;</a></span>crinitClientSetErrStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void crinitClientSetErrStream </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>errStream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Selects the stream on which to output error messages.</p>
<p>By default, the crinit-client library will output error messages to stderr specifying where a failure occurred. This function can be used to pipe them to a logfile instead or to completely suppress them by piping to /dev/null. The stream can be the same as the one used for <a class="el" href="crinit-client_8h.html#ac1c5a8ae37cd47fe02b39843e23598d3">crinitClientSetInfoStream()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">errStream</td><td>The stream to use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac1c5a8ae37cd47fe02b39843e23598d3" name="ac1c5a8ae37cd47fe02b39843e23598d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1c5a8ae37cd47fe02b39843e23598d3">&#9670;&#160;</a></span>crinitClientSetInfoStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void crinitClientSetInfoStream </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>infoStream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Selects the stream on which to output (debug) information messages.</p>
<p>By default, the crinit-client library will output debug information messages to stdout if activated by <a class="el" href="crinit-client_8h.html#a6bef26ee9ac132ce2f088d19397fba14">crinitClientSetVerbose()</a>. This function can be used to pipe them to a logfile instead. The stream can be the same as the one used for <a class="el" href="crinit-client_8h.html#ac1c5a8ae37cd47fe02b39843e23598d3">crinitClientSetInfoStream()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">infoStream</td><td>The stream to use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a99446d18e5a1cb1fac9075281d0e107b" name="a99446d18e5a1cb1fac9075281d0e107b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99446d18e5a1cb1fac9075281d0e107b">&#9670;&#160;</a></span>crinitClientSetNotifyTaskName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void crinitClientSetNotifyTaskName </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the task name reported to Crinit by <a class="el" href="crinit-client_8h.html#a552af1307248625831adbd656e3c4e17">sd_notify()</a>.</p>
<p>The default is set via the environment variable specified by <a class="el" href="crinit-sdefs_8h.html#a8a70a653993cfb028af1bc1c1f72b8b6">CRINIT_ENV_NOTIFY_NAME</a> if it is present.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskName</td><td>The task name to use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2a429c3194e39becd83d2b8271edcc7d" name="a2a429c3194e39becd83d2b8271edcc7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a429c3194e39becd83d2b8271edcc7d">&#9670;&#160;</a></span>crinitClientSetSocketPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void crinitClientSetSocketPath </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sockFile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the path to Crinit's AF_UNIX communication socket.</p>
<p>The default is set at library compile-time via the CMake <code>CRINIT_SOCKFILE</code> setting.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sockFile</td><td>Path to the socket file. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6bef26ee9ac132ce2f088d19397fba14" name="a6bef26ee9ac132ce2f088d19397fba14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bef26ee9ac132ce2f088d19397fba14">&#9670;&#160;</a></span>crinitClientSetVerbose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crinitClientSetVerbose </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Turns debug output on or off.</p>
<p>The default is no debug output.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>If there should be debug output (YES==true). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adf24c20b8485328c3279154c35923d14" name="adf24c20b8485328c3279154c35923d14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf24c20b8485328c3279154c35923d14">&#9670;&#160;</a></span>crinitClientShutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crinitClientShutdown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="crinit-sdefs_8h.html#a06e6d55c070ebd32aabe402362e845be">crinitShutdownCmd_t</a>&#160;</td>
          <td class="paramname"><em>sCmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request Crinit to initiate an immediate shutdown or reboot.</p>
<p>Calling process must have the CAP_SYS_BOOT capability or Crinit will refuse with "Permission denied." Before issuing the shutdown or reboot syscall, Crinit will send SIGCONT+SIGTERM to all processes, wait a grace period (which can be set in the main series config file as <code>SHUTDOWN_GRACE_PERIOD_US = &lt;microseconds&gt;</code>), send SIGKILL to remaining processes, detach or read-only-remount all filesystems, and finally call sync().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sCmd</td><td>The shutdown command to be performed, either CRINIT_SHD_POWEROFF (for poweroff) or CRINIT_SHD_POWEROFF (for reboot).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="a2b9a8819e0a34c20e29d2c50106565f3" name="a2b9a8819e0a34c20e29d2c50106565f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b9a8819e0a34c20e29d2c50106565f3">&#9670;&#160;</a></span>crinitClientTaskAdd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crinitClientTaskAdd </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>configFilePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>overwrite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>forceDeps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Requests Crinit to add a task from a given task config.</p>
<p>If successful, the given task configuration will be parsed and added to the TaskDB. Task execution takes place once all dependencies have been fulfilled, as with pre-loaded tasks.</p>
<p>Using <em>forceDeps</em>, it is possible to specify a DEPENDS value which overrides the one in the configuration file. An empty string will cause the task to be started immediately. Specifying <code>@ctl:enable</code> will let the task wait for <a class="el" href="crinit-client_8h.html#a83f876629b669304313ab5adf676e46b">crinitClientTaskEnable()</a>. If the dependencies from the task config file should be used, <em>forceDeps</em> must be <code>NULL</code> or <code>"@unchanged"</code>.</p>
<p>Note, that Crinit does not keep track of already fulfilled dependencies, i.e. in order to not be blocked forever a task configuration must only contain dependencies which will be fulfilled <b>in the future</b>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">configFilePath</td><td><b>Absolute</b> path to the task configuration file. </td></tr>
    <tr><td class="paramname">overwrite</td><td>If an existing task with the same name should be overwritten (==true). Otherwise Crinit would return an error in this case. </td></tr>
    <tr><td class="paramname">forceDeps</td><td>String to override the value of DEPENDS in the config file, can be "" for no dependencies (immediate start), an arbitrary list of dependencies, or <code>NULL</code>/<code>"@unchanged"</code> to keep the dependencies in the config.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 otherwise </dd></dl>

</div>
</div>
<a id="a0121643b941198a60340f797042fd902" name="a0121643b941198a60340f797042fd902"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0121643b941198a60340f797042fd902">&#9670;&#160;</a></span>crinitClientTaskDisable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crinitClientTaskDisable </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Requests Crinit to add the dependency <code>"@ctl:enable"</code> to a specific task.</p>
<p>This can be used in tandem with <a class="el" href="crinit-client_8h.html#a83f876629b669304313ab5adf676e46b">crinitClientTaskEnable()</a> to implement starting on command.</p>
<p>Note, that this function can also be used to prevent tasks with the <code>RESPAWN</code> option set to <code>YES</code> from respawning, temporarily or permanently.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskName</td><td>The name of the task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="a83f876629b669304313ab5adf676e46b" name="a83f876629b669304313ab5adf676e46b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83f876629b669304313ab5adf676e46b">&#9670;&#160;</a></span>crinitClientTaskEnable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crinitClientTaskEnable </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Requests Crinit to remove the dependency <code>"@ctl:enable"</code> from a specific task.</p>
<p>This can be used in tandem with <a class="el" href="crinit-client_8h.html#a0121643b941198a60340f797042fd902">crinitClientTaskDisable()</a> or config files which already contain the above dependency to implement starting on command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskName</td><td>The name of the task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="ac63ab0a7b48b7cfe401c6ac300a95726" name="ac63ab0a7b48b7cfe401c6ac300a95726"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac63ab0a7b48b7cfe401c6ac300a95726">&#9670;&#160;</a></span>crinitClientTaskGetStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crinitClientTaskGetStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="crinit-sdefs_8h.html#a96326334c512388a4528407927f1d770">crinitTaskState_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t *&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timespec *&#160;</td>
          <td class="paramname"><em>ct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timespec *&#160;</td>
          <td class="paramname"><em>st</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timespec *&#160;</td>
          <td class="paramname"><em>et</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gid_t *&#160;</td>
          <td class="paramname"><em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uid_t *&#160;</td>
          <td class="paramname"><em>uid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>groupname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request Crinit to report the current state, PID, and timestamps of a task from its TaskDB.</p>
<p>Timestamps of events that have not yet happened are always <code>{0,0}</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>Return pointer for the task's state. </td></tr>
    <tr><td class="paramname">pid</td><td>Return pointer for the task's PID. </td></tr>
    <tr><td class="paramname">ct</td><td>The time when the task was created (loaded/parsed). </td></tr>
    <tr><td class="paramname">st</td><td>The time when the task was last started (i.e. became running). </td></tr>
    <tr><td class="paramname">et</td><td>The time when the task last ended (i.e. failed or was done). </td></tr>
    <tr><td class="paramname">gid</td><td>Return pointer for the task's GID. </td></tr>
    <tr><td class="paramname">uid</td><td>Return pointer for the task's UID. </td></tr>
    <tr><td class="paramname">groupname</td><td>Return pointer for the task's groupname. </td></tr>
    <tr><td class="paramname">username</td><td>Return pointer for the task's username. </td></tr>
    <tr><td class="paramname">taskName</td><td>The name of the task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="aa58415abb0426a4e0459ca1b9587fa4b" name="aa58415abb0426a4e0459ca1b9587fa4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa58415abb0426a4e0459ca1b9587fa4b">&#9670;&#160;</a></span>crinitClientTaskKill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crinitClientTaskKill </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request Crinit to send SIGKILL to a task process.</p>
<p>Will only send a signal if a corresponding PID has been saved in the TaskDB, either through <a class="el" href="crinit-client_8h.html#a552af1307248625831adbd656e3c4e17">sd_notify()</a> or the Process Dispatcher during process start.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskName</td><td>The name of the task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="ad2caf33cef7ee8fbc1646dcc9fa6c230" name="ad2caf33cef7ee8fbc1646dcc9fa6c230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2caf33cef7ee8fbc1646dcc9fa6c230">&#9670;&#160;</a></span>crinitClientTaskRestart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crinitClientTaskRestart </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request Crinit to reset the state of a task within the TaskDB.</p>
<p>State will be reset to 0 it is currently <a class="el" href="crinit-sdefs_8h.html#ae2c25b39f02dab5aba41cbbafcff876a" title="Bitmask indicating a task has finished without error.">CRINIT_TASK_STATE_DONE</a> or <a class="el" href="crinit-sdefs_8h.html#a0d9c49d0bab264f769bf49414a6cecec" title="Bitmask indicating a task has finished with an error code.">CRINIT_TASK_STATE_FAILED</a>. If the task has no unfulfilled dependencies, this will cause an immediate restart.</p>
<p>Note, that the semantics are different than with e.g. <code>systemctl restart</code>. To get equivalent behaviour, i.e. restart a task that is currently running, a possibility is a call to <a class="el" href="crinit-client_8h.html#a85cfc802eeed2ac4a57b8e7f5de9193e">crinitClientTaskStop()</a> followed by a call to this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskName</td><td>The name of the task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="a85cfc802eeed2ac4a57b8e7f5de9193e" name="a85cfc802eeed2ac4a57b8e7f5de9193e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85cfc802eeed2ac4a57b8e7f5de9193e">&#9670;&#160;</a></span>crinitClientTaskStop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crinitClientTaskStop </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>taskName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request Crinit to stop a task. This will either result in the corresponding <code>STOP_COMMAND</code> being executed or, if no <code>STOP_COMMAND</code> is defined, a SIGTERM being sent to the currently running task process.</p>
<p>Crinit will only send a SIGTERM if a corresponding PID is known, either through <a class="el" href="crinit-client_8h.html#a552af1307248625831adbd656e3c4e17">sd_notify()</a> or the Process Dispatcher during process start.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskName</td><td>The name of the task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a id="a552af1307248625831adbd656e3c4e17" name="a552af1307248625831adbd656e3c4e17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a552af1307248625831adbd656e3c4e17">&#9670;&#160;</a></span>sd_notify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sd_notify </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>unset_environment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notifies Crinit of task state changes.</p>
<p>Partially implements the SD_NOTIFY interface of systemd. Specifically, the commands READY and MAINPID are supported. Others are currently unimplemented and will be ignored. The <em>unset_environment</em> argument is also unimplemented, i.e. the environment will not be unset. If <em>unset_environment</em> is not 0, a warning will be printed.</p>
<p>READY=1 lets Crinit know the task is currently running. MAINPID=[pid] tells Crinit its PID. Delimiting character is a newline.</p>
<p>Example: <code>"READY=1\nMAINPID=42"</code> will update the task's state to <a class="el" href="crinit-sdefs_8h.html#a72eb539da91c6a7a1081f5df68ce700b" title="Bitmask indicating the task has spawned a process and is running.">CRINIT_TASK_STATE_RUNNING</a> and its PID to 42.</p>
<p>For more information regarding the use cases of this interface, refer to the official SD_NOTIFY documentation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">unset_environment</td><td>Unimplemented, should be set to 0. </td></tr>
    <tr><td class="paramname">state</td><td>SD_NOTIFY string. A newline-separated list of commands, as in the above example.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 otherwise </dd></dl>

</div>
</div>
<a id="ab3f167408ac95348cec086b92f3c694a" name="ab3f167408ac95348cec086b92f3c694a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3f167408ac95348cec086b92f3c694a">&#9670;&#160;</a></span>sd_notifyf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sd_notifyf </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>unset_environment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notifies Crinit of task state changes.</p>
<p>Like <a class="el" href="crinit-client_8h.html#a552af1307248625831adbd656e3c4e17">sd_notify()</a> but uses printf-style formatting for the input string. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_bfccd401955b95cf8c75461437045ac0.html">inc</a></li><li class="navelem"><a class="el" href="crinit-client_8h.html">crinit-client.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
