<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="674px" preserveAspectRatio="none" style="width:947px;height:674px;" version="1.1" viewBox="0 0 947 674" width="947px" zoomAndPan="magnify"><defs><filter height="300%" id="f18mdex143tn14" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster Rootfs Init Daemon--><polygon fill="#FFFFFF" filter="url(#f18mdex143tn14)" points="130.5,136,140.5,126,570.5,126,570.5,330,560.5,340,130.5,340,130.5,136" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="560.5" x2="569.5" y1="136" y2="127"/><line style="stroke: #000000; stroke-width: 1.5;" x1="130.5" x2="560.5" y1="136" y2="136"/><line style="stroke: #000000; stroke-width: 1.5;" x1="560.5" x2="560.5" y1="136" y2="340"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="272" y="151.9951">Rootfs Init Daemon</text><!--entity task_data--><rect fill="#FEFECE" filter="url(#f18mdex143tn14)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="397" y="166"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="392" y="171"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="392" y="192.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="407" y="188.9951">Task Data Structure</text><!--entity notify_if--><rect fill="#FEFECE" filter="url(#f18mdex143tn14)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="215" x="147" y="166"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="142" y="171"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="142" y="192.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="195" x="157" y="188.9951">Notification/Service Interface</text><!--entity proc_dispatch--><rect fill="#FEFECE" filter="url(#f18mdex143tn14)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="155" x="399" y="288"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="394" y="293"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="394" y="314.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="135" x="409" y="310.9951">Process Dispatcher</text><!--entity config_parser--><rect fill="#FEFECE" filter="url(#f18mdex143tn14)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="251.5" y="288"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="246.5" y="293"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="246.5" y="314.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="261.5" y="310.9951">Config Parser</text><!--entity tasks--><path d="M447,425 C447,422 449,420 452,420 C455,420 457,422 457,425 C457,422 459,420 462,420 C465,420 467,422 467,425 C467,422 469,420 472,420 C475,420 477,422 477,425 C477,422 479,420 482,420 C485,420 487,422 487,425 C487,422 489,420 492,420 C495,420 497,422 497,425 C497,422 499,420 502,420 C505,420 507,422 507,425 C510,425 512,427 512,430 C512,433 510,435 507,435 C510,435 512,437 512,440 C512,443 510,445 507,445 C507,448 504,450 502,450 C499,450 497,448 497,445 C497,448 494,450 492,450 C489,450 487,448 487,445 C487,448 484,450 482,450 C479,450 477,448 477,445 C477,448 474,450 472,450 C469,450 467,448 467,445 C467,448 464,450 462,450 C459,450 457,448 457,445 C457,448 454,450 452,450 C449,450 447,448 447,445 C444,445 442,443 442,440 C442,437 444,435 447,435 C444,435 442,433 442,430 C442,427 444,425 447,425 " fill="#FEFECE" filter="url(#f18mdex143tn14)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="454" y="440.9951">Tasks</text><!--entity notify_lib--><rect fill="#FEFECE" filter="url(#f18mdex143tn14)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="307.5" y="520"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="302.5" y="525"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="302.5" y="546.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="176" x="317.5" y="542.9951">Notfication/Service Library</text><!--entity task_configs--><path d="M255,425 C255,422 257,420 260,420 C263,420 265,422 265,425 C265,422 267,420 270,420 C273,420 275,422 275,425 C275,422 277,420 280,420 C283,420 285,422 285,425 C285,422 287,420 290,420 C293,420 295,422 295,425 C295,422 297,420 300,420 C303,420 305,422 305,425 C305,422 307,420 310,420 C313,420 315,422 315,425 C315,422 317,420 320,420 C323,420 325,422 325,425 C325,422 327,420 330,420 C333,420 335,422 335,425 C335,422 337,420 340,420 C343,420 345,422 345,425 C345,422 347,420 350,420 C353,420 355,422 355,425 C355,422 357,420 360,420 C363,420 365,422 365,425 C365,422 367,420 370,420 C373,420 375,422 375,425 C375,422 377,420 380,420 C383,420 385,422 385,425 C385,422 387,420 390,420 C393,420 395,422 395,425 C395,422 397,420 400,420 C403,420 405,422 405,425 C408,425 410,427 410,430 C410,433 408,435 405,435 C408,435 410,437 410,440 C410,443 408,445 405,445 C405,448 402,450 400,450 C397,450 395,448 395,445 C395,448 392,450 390,450 C387,450 385,448 385,445 C385,448 382,450 380,450 C377,450 375,448 375,445 C375,448 372,450 370,450 C367,450 365,448 365,445 C365,448 362,450 360,450 C357,450 355,448 355,445 C355,448 352,450 350,450 C347,450 345,448 345,445 C345,448 342,450 340,450 C337,450 335,448 335,445 C335,448 332,450 330,450 C327,450 325,448 325,445 C325,448 322,450 320,450 C317,450 315,448 315,445 C315,448 312,450 310,450 C307,450 305,448 305,445 C305,448 302,450 300,450 C297,450 295,448 295,445 C295,448 292,450 290,450 C287,450 285,448 285,445 C285,448 282,450 280,450 C277,450 275,448 275,445 C275,448 272,450 270,450 C267,450 265,448 265,445 C265,448 262,450 260,450 C257,450 255,448 255,445 C252,445 250,443 250,440 C250,437 252,435 255,435 C252,435 250,433 250,430 C250,427 252,425 255,425 " fill="#FEFECE" filter="url(#f18mdex143tn14)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="262" y="440.9951">Task Configurations</text><!--entity corb_monitor--><polygon fill="#FEFECE" filter="url(#f18mdex143tn14)" points="52,525,62,515,203,515,203,551.2969,193,561.2969,52,561.2969,52,525" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="193" x2="202" y1="525" y2="516"/><line style="stroke: #000000; stroke-width: 1.5;" x1="52" x2="193" y1="525" y2="525"/><line style="stroke: #000000; stroke-width: 1.5;" x1="193" x2="193" y1="525" y2="561.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="67" y="547.9951">BaseOS Monitor</text><path d="M6,8 L6,78.5313 A0,0 0 0 0 6,78.5313 L179.23,78.5313 L242.62,165.68 L187.23,78.5313 L313,78.5313 A0,0 0 0 0 313,78.5313 L313,18 L303,8 L6,8 A0,0 0 0 0 6,8 " fill="#FBFB77" filter="url(#f18mdex143tn14)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M303,8 L303,18 L313,18 L303,8 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="12" y="25.0669">Notifies Task Data Structure of events</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="12" y="40.1997">from SD_NOTIFY library and BaseOS Monitor.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="12" y="55.3325">Multi-threaded UNIX domain socket server</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="12" y="70.4653">for Notification/Sevice Library.</text><path d="M347.5,8 L347.5,78.5313 A0,0 0 0 0 347.5,78.5313 L542.77,78.5313 L487.38,165.68 L550.77,78.5313 L793.5,78.5313 A0,0 0 0 0 793.5,78.5313 L793.5,18 L783.5,8 L347.5,8 A0,0 0 0 0 347.5,8 " fill="#FBFB77" filter="url(#f18mdex143tn14)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M783.5,8 L783.5,18 L793.5,18 L783.5,8 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="413" x="353.5" y="25.0669">"Intelligent" data structure implementing a task database. Keeps</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="424" x="353.5" y="40.1997">track of waiting, running, finished tasks and handles state changes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="425" x="353.5" y="55.3325">through events. Will notify process dispatcher upon a state change</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="353.5" y="70.4653">that implies a new task is ready to run.</text><path d="M247,622 L247,662.2656 A0,0 0 0 0 247,662.2656 L564,662.2656 A0,0 0 0 0 564,662.2656 L564,632 L554,622 L409.5,622 L405.5,556.3 L401.5,622 L247,622 A0,0 0 0 0 247,622 " fill="#FBFB77" filter="url(#f18mdex143tn14)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M554,622 L554,632 L564,632 L554,622 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="293" x="253" y="639.0669">C interface compatible with SD_NOTIFY. Feeds</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="253" y="654.1997">notifications to Task Data Structure as events.</text><path d="M589.5,141 L589.5,226.6641 A0,0 0 0 0 589.5,226.6641 L658.07,226.6641 L517.06,287.98 L666.07,226.6641 L935.5,226.6641 A0,0 0 0 0 935.5,226.6641 L935.5,151 L925.5,141 L589.5,141 A0,0 0 0 0 589.5,141 " fill="#FBFB77" filter="url(#f18mdex143tn14)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M925.5,141 L925.5,151 L935.5,151 L925.5,141 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="325" x="595.5" y="158.0669">Multi-threaded process spawner. Spawns and waits</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290" x="595.5" y="173.1997">for processes. Notifies Task Data Structure of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="302" x="595.5" y="188.3325">"spawn" and "wait" events.  SafeSystemStartup</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="595.5" y="203.4653">parts will be in here to spawn a jailed task</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="595.5" y="218.5981">according to config.</text><!--link notify_if to notify_lib--><path d="M244.8,206.85 C224.82,255.51 184.88,374.76 234.5,454 C254.45,485.86 290.5,505.8 324.37,518.12 " fill="none" id="notify_if-notify_lib" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="329.35,519.88,322.204,513.1025,324.6374,518.2092,319.5307,520.6426,329.35,519.88" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="246.79,202.09,239.6287,208.8514,244.8619,206.7033,247.01,211.9364,246.79,202.09" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="213.5" y="369.0669">AF_UNIX</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="219.5" y="384.1997">socket</text><!--link notify_if to corb_monitor--><path d="M222.06,205.36 C204.59,218.06 184.27,235.97 172.5,257 C126.13,339.87 124.09,456.81 125.9,509.44 " fill="none" id="notify_if-corb_monitor" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="126.1,514.63,129.7632,505.4877,125.9144,509.6334,121.7687,505.7847,126.1,514.63" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="226.43,202.25,216.7788,204.2134,222.3575,205.1508,221.4201,210.7294,226.43,202.25" style="stroke: #A80036; stroke-width: 1.0;"/><!--link config_parser to task_configs--><path d="M311.52,329.38 C316.04,354.5 323.26,394.73 327.37,417.6 " fill="none" id="config_parser-task_configs" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="310.6,324.26,308.255,333.8256,311.4844,329.1812,316.1288,332.4106,310.6,324.26" style="stroke: #A80036; stroke-width: 1.0;"/><!--link proc_dispatch to tasks--><path d="M476.23,324.26 C475.87,347.07 475.25,387.29 474.85,412.47 " fill="none" id="proc_dispatch-tasks" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="474.77,417.6,478.8982,408.6581,474.8414,412.6005,470.899,408.5438,474.77,417.6" style="stroke: #A80036; stroke-width: 1.0;"/><!--link tasks to notify_lib--><path d="M462.48,454.42 C450.81,471.34 433.05,497.08 420.46,515.32 " fill="none" id="tasks-notify_lib" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="417.38,519.78,425.787,514.6495,420.2223,515.6665,419.2054,510.1018,417.38,519.78" style="stroke: #A80036; stroke-width: 1.0;"/><!--link task_configs to tasks--><path d="M414.4,436 C424.23,436 434.07,436 443.91,436 " fill="none" id="task_configs-tasks" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="409.25,436,418.25,440,414.25,436,418.25,432,409.25,436" style="stroke: #A80036; stroke-width: 1.0;"/><!--link task_data to proc_dispatch--><path d="M475.69,207.25 C475.86,228.73 476.13,261.08 476.31,282.61 " fill="none" id="task_data-proc_dispatch" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="476.36,287.84,480.2827,278.806,476.3171,282.8402,472.283,278.8746,476.36,287.84" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="475.64,202.19,471.7175,211.2241,475.683,207.1898,479.7172,211.1553,475.64,202.19" style="stroke: #A80036; stroke-width: 1.0;"/><!--link task_data to notify_if--><path d="M391.75,184 C381.97,184 372.19,184 362.41,184 " fill="none" id="task_data-notify_if" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="396.87,184,387.87,180,391.87,184,387.87,188,396.87,184" style="stroke: #A80036; stroke-width: 1.0;"/><!--link task_data to config_parser--><path d="M447.18,205.23 C416.24,227.33 366.96,262.53 335.96,284.67 " fill="none" id="task_data-config_parser" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="331.53,287.84,341.1812,285.8766,335.6025,284.9392,336.5399,279.3606,331.53,287.84" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="451.43,202.19,441.7867,204.1919,447.3691,205.107,446.4539,210.6893,451.43,202.19" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
node "Rootfs Init Daemon" {
	component "Task Data Structure" as task_data
	component "Notification/Service Interface" as notify_if
	component "Process Dispatcher" as proc_dispatch
	component "Config Parser" as config_parser
}
cloud "Tasks" as tasks
component "Notfication/Service Library" as notify_lib
cloud "Task Configurations" as task_configs
node "BaseOS Monitor" as corb_monitor

notify_if <-down..-> notify_lib : AF_UNIX\nsocket
notify_if <-..-> corb_monitor
task_configs -up-> config_parser
proc_dispatch -right-> tasks
tasks -right-> notify_lib
tasks -left-> task_configs
proc_dispatch <-up-> task_data
notify_if -left-> task_data
config_parser <-up-> task_data

note top of notify_if
    Notifies Task Data Structure of events
    from SD_NOTIFY library and BaseOS Monitor.
    Multi-threaded UNIX domain socket server
    for Notification/Sevice Library.
end note

note top of task_data
    "Intelligent" data structure implementing a task database. Keeps
    track of waiting, running, finished tasks and handles state changes
    through events. Will notify process dispatcher upon a state change
    that implies a new task is ready to run.
end note

note bottom of notify_lib
    C interface compatible with SD_NOTIFY. Feeds
    notifications to Task Data Structure as events.
end note

note top of proc_dispatch
    Multi-threaded process spawner. Spawns and waits
    for processes. Notifies Task Data Structure of
    "spawn" and "wait" events.  SafeSystemStartup
    parts will be in here to spawn a jailed task
    according to config.
end note

@enduml

PlantUML version 1.2018.13(Mon Nov 26 17:11:51 UTC 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.11+9-Ubuntu-0ubuntu2.20.04
Operating System: Linux
OS Version: 5.11.0-37-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>