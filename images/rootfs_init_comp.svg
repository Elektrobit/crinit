<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="684px" preserveAspectRatio="none" style="width:947px;height:684px;" version="1.1" viewBox="0 0 947 684" width="947px" zoomAndPan="magnify"><defs><filter height="300%" id="f18mdex143tn14" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[e89e7f802cee7904414cfa391d8b0a7d]
cluster Rootfs Init Daemon--><polygon fill="#FFFFFF" filter="url(#f18mdex143tn14)" points="130.5,136,140.5,126,570.5,126,570.5,330,560.5,340,130.5,340,130.5,136" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="560.5" x2="569.5" y1="136" y2="127"/><line style="stroke: #000000; stroke-width: 1.5;" x1="130.5" x2="560.5" y1="136" y2="136"/><line style="stroke: #000000; stroke-width: 1.5;" x1="560.5" x2="560.5" y1="136" y2="340"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="272" y="151.9951">Rootfs Init Daemon</text><!--MD5=[b1c03e31e8e4aba3b48288f5fb7baab7]
entity task_data--><rect fill="#FEFECE" filter="url(#f18mdex143tn14)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="397" y="166"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="392" y="171"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="392" y="192.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="407" y="188.9951">Task Data Structure</text><!--MD5=[e95d62d4ae304974bf1b2a8d75b6338f]
entity notify_if--><rect fill="#FEFECE" filter="url(#f18mdex143tn14)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="215" x="147" y="166"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="142" y="171"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="142" y="192.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="195" x="157" y="188.9951">Notification/Service Interface</text><!--MD5=[71a1dd951cbd77f13c8931e0aa1f37cc]
entity proc_dispatch--><rect fill="#FEFECE" filter="url(#f18mdex143tn14)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="155" x="399" y="288"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="394" y="293"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="394" y="314.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="135" x="409" y="310.9951">Process Dispatcher</text><!--MD5=[72d6bad1dcb09ed30eb531fdac63773e]
entity config_parser--><rect fill="#FEFECE" filter="url(#f18mdex143tn14)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="251.5" y="288"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="246.5" y="293"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="246.5" y="314.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="261.5" y="310.9951">Config Parser</text><!--MD5=[b4a82ef0e67a03c4072f6c2be9006ed8]
entity tasks--><path d="M457.5059,426.9851 C460.9923,420.8839 467.1442,420.9701 471.0315,426.5198 C472.7164,418.8205 479.0907,418.7703 483.943,423.128 C489.3625,417.6509 496.652,417.2754 499.3491,426.0673 C503.6185,418.7988 508.7834,419.4387 512.9435,426.1735 C522.459,430.0143 523.1152,437.4868 514.6156,443.1066 C521.2265,448.6509 518.6169,454.1835 511.8182,457.0345 C509.099,464.68 503.5318,467.1353 497.3497,460.5568 C494.3723,466.8214 490.2176,467.81 484.6683,463.7009 C478.7369,468.2407 474.1573,467.9411 471.1209,460.4429 C466.1255,467.8106 459.1253,465.7555 456.3023,458.2749 C444.9679,457.1353 443.2989,451.4179 448.1493,442.1136 C442.9434,433.2767 448.4718,427.015 457.5059,426.9851 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="463" y="445.9951">Tasks</text><!--MD5=[8f9344b930b3d2ff43aba06ac6141f23]
entity notify_lib--><rect fill="#FEFECE" filter="url(#f18mdex143tn14)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="308.5" y="530"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="303.5" y="535"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="303.5" y="556.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="176" x="318.5" y="552.9951">Notfication/Service Library</text><!--MD5=[afde436b5f41694cc1cd19daf8c702ae]
entity task_configs--><path d="M255.2263,426.4404 C259.5892,420.2985 263.7296,421.3131 267.5022,427.0505 C271.4516,420.1191 275.5469,420.5204 280.3493,426.1801 C284.0588,420.9542 288.4529,420.0528 292.0807,426.2639 C295.8732,419.402 300.8033,417.7451 306.2819,424.5062 C310.1586,419.2387 313.5554,419.647 317.1356,424.8145 C320.364,417.9784 326.8066,418.074 330.7557,424.0483 C334.5219,418.1821 339.4166,418.3457 342.9723,424.2664 C347.4562,417.9018 352.9517,419.0542 356.843,424.9375 C359.8572,419.3152 365.3947,420.6986 368.0837,425.2952 C372.3238,419.0044 378.6574,420.0691 381.47,426.7664 C384.8871,420.5879 390.7609,421.804 393.61,427.3544 C397.382,420.5241 402.2241,420.8235 406.8489,426.4478 C414.6969,429.8721 416.6494,436.5166 410.2145,442.8683 C416.364,449.1246 412.8766,455.629 405.4623,457.4712 C402.6391,464.2957 397.7422,464.542 392.8613,459.6922 C389.3329,465.2204 384.6148,465.3304 380.5067,460.3754 C378.2504,467.9506 372.3048,467.7035 367.4207,463.2292 C364.2293,469.9815 359.3388,470.1957 355.3281,463.994 C352.3431,469.7726 346.527,471.7367 342.3253,465.2879 C339.9301,471.9957 336.5609,472.4712 331.5147,467.8084 C325.7236,474.8105 321.1987,473.492 317.1104,466.104 C313.0356,471.4307 308.1973,470.4647 305.9651,464.3146 C301.084,469.7063 297.1752,470.2636 293.549,463.0759 C288.0796,469.9099 283.1988,467.7605 279.6256,461.117 C275.2888,466.296 270.8253,465.349 267.623,459.8426 C263.8215,464.2684 258.1708,463.9045 255.7653,458.2073 C245.6704,456.8008 242.2597,451.5286 247.5488,442.2171 C242.5463,434.4795 244.5257,426.5365 255.2263,426.4404 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="261" y="445.9951">Task Configurations</text><!--MD5=[a707311e1c264637f331391bb936e903]
entity corb_monitor--><polygon fill="#FEFECE" filter="url(#f18mdex143tn14)" points="46,535,56,525,197,525,197,561.2969,187,571.2969,46,571.2969,46,535" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="187" x2="196" y1="535" y2="526"/><line style="stroke: #000000; stroke-width: 1.5;" x1="46" x2="187" y1="535" y2="535"/><line style="stroke: #000000; stroke-width: 1.5;" x1="187" x2="187" y1="535" y2="571.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="61" y="557.9951">BaseOS Monitor</text><path d="M6,8 L6,78.5313 A0,0 0 0 0 6,78.5313 L179.23,78.5313 L242.62,165.68 L187.23,78.5313 L313,78.5313 A0,0 0 0 0 313,78.5313 L313,18 L303,8 L6,8 A0,0 0 0 0 6,8 " fill="#FBFB77" filter="url(#f18mdex143tn14)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M303,8 L303,18 L313,18 L303,8 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="12" y="25.0669">Notifies Task Data Structure of events</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="12" y="40.1997">from SD_NOTIFY library and BaseOS Monitor.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="12" y="55.3325">Multi-threaded UNIX domain socket server</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="12" y="70.4653">for Notification/Sevice Library.</text><path d="M347.5,8 L347.5,78.5313 A0,0 0 0 0 347.5,78.5313 L542.77,78.5313 L487.38,165.68 L550.77,78.5313 L793.5,78.5313 A0,0 0 0 0 793.5,78.5313 L793.5,18 L783.5,8 L347.5,8 A0,0 0 0 0 347.5,8 " fill="#FBFB77" filter="url(#f18mdex143tn14)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M783.5,8 L783.5,18 L793.5,18 L783.5,8 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="413" x="353.5" y="25.0669">"Intelligent" data structure implementing a task database. Keeps</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="424" x="353.5" y="40.1997">track of waiting, running, finished tasks and handles state changes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="425" x="353.5" y="55.3325">through events. Will notify process dispatcher upon a state change</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="353.5" y="70.4653">that implies a new task is ready to run.</text><path d="M248,632 L248,672.2656 A0,0 0 0 0 248,672.2656 L565,672.2656 A0,0 0 0 0 565,672.2656 L565,642 L555,632 L410.5,632 L406.5,566.3 L402.5,632 L248,632 A0,0 0 0 0 248,632 " fill="#FBFB77" filter="url(#f18mdex143tn14)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M555,632 L555,642 L565,642 L555,632 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="293" x="254" y="649.0669">C interface compatible with SD_NOTIFY. Feeds</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="254" y="664.1997">notifications to Task Data Structure as events.</text><path d="M589.5,141 L589.5,226.6641 A0,0 0 0 0 589.5,226.6641 L658.07,226.6641 L517.06,287.98 L666.07,226.6641 L935.5,226.6641 A0,0 0 0 0 935.5,226.6641 L935.5,151 L925.5,141 L589.5,141 A0,0 0 0 0 589.5,141 " fill="#FBFB77" filter="url(#f18mdex143tn14)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M925.5,141 L925.5,151 L935.5,151 L925.5,141 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="325" x="595.5" y="158.0669">Multi-threaded process spawner. Spawns and waits</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290" x="595.5" y="173.1997">for processes. Notifies Task Data Structure of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="302" x="595.5" y="188.3325">"spawn" and "wait" events.  SafeSystemStartup</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="595.5" y="203.4653">parts will be in here to spawn a jailed task</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="595.5" y="218.5981">according to config.</text><!--MD5=[0d5a05e6bf54432b44fadb92b8b8293e]
link notify_if to notify_lib--><path d="M244.15,206.67 C221.96,256.55 175.96,381.53 228.5,464 C248.93,496.07 285.34,515.95 319.93,528.17 " fill="none" id="notify_if-notify_lib" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="325.01,529.92,317.785,523.2268,320.2781,528.3046,315.2003,530.7978,325.01,529.92" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="246.21,202.08,238.8613,208.6372,244.1528,206.6372,246.1529,211.9287,246.21,202.08" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="206.5" y="369.0669">AF_UNIX</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="212.5" y="384.1997">socket</text><!--MD5=[19abc725c1c3d4229740f330ff0e005f]
link notify_if to corb_monitor--><path d="M219.76,204.81 C201,217.35 179.16,235.28 166.5,257 C116.56,342.72 116.55,465.82 119.42,519.84 " fill="none" id="notify_if-corb_monitor" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="119.7,524.85,123.2048,515.6459,119.4282,519.8574,115.2167,516.0808,119.7,524.85" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="223.96,202.06,214.2399,203.6472,219.7779,204.8005,218.6246,210.3385,223.96,202.06" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[5888715a8b566780e1edfec5027867cd]
reverse link config_parser to task_configs--><path d="M311.16,329.11 C315.22,353.64 321.73,393 325.8,417.63 " fill="none" id="config_parser&lt;-task_configs" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="310.33,324.12,307.8506,333.6517,311.145,329.0531,315.7436,332.3476,310.33,324.12" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[be8c07a6a23ff1de87ed9f0f92c469af]
link proc_dispatch to tasks--><path d="M477.4,324.12 C478.58,346.48 480.65,385.91 482.05,412.49 " fill="none" id="proc_dispatch-&gt;tasks" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="482.32,417.63,485.8263,408.4264,482.049,412.6374,477.838,408.8601,482.32,417.63" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a0245fc8d26f7a780c0fcca8477b805f]
link tasks to notify_lib--><path d="M467.36,464.01 C454.11,482.08 435.44,507.53 422.29,525.47 " fill="none" id="tasks-&gt;notify_lib" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="419.07,529.86,427.6119,524.9573,422.0219,525.8244,421.1548,520.2343,419.07,529.86" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0d44d17e9ff4a9aef18185135aa1c84a]
reverse link task_configs to tasks--><path d="M418.26,441 C428.09,441 437.93,441 447.76,441 " fill="none" id="task_configs&lt;-tasks" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="413.12,441,422.12,445,418.12,441,422.12,437,413.12,441" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a21274e58ee4cd3d92d561e3e3881d5d]
link task_data to proc_dispatch--><path d="M475.69,207.25 C475.86,228.73 476.13,261.08 476.31,282.61 " fill="none" id="task_data-proc_dispatch" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="476.36,287.84,480.2827,278.806,476.3171,282.8402,472.283,278.8746,476.36,287.84" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="475.64,202.19,471.7175,211.2241,475.683,207.1898,479.7172,211.1553,475.64,202.19" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8105c90c87e2092d630a0a6d92ed6599]
reverse link task_data to notify_if--><path d="M391.75,184 C381.97,184 372.19,184 362.41,184 " fill="none" id="task_data&lt;-notify_if" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="396.87,184,387.87,180,391.87,184,387.87,188,396.87,184" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ba158caa6c048d52fb5e6c09b77fb367]
link task_data to config_parser--><path d="M447.18,205.23 C416.24,227.33 366.96,262.53 335.96,284.67 " fill="none" id="task_data-config_parser" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="331.53,287.84,341.1812,285.8766,335.6025,284.9392,336.5399,279.3606,331.53,287.84" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="451.43,202.19,441.7867,204.1919,447.3691,205.107,446.4539,210.6893,451.43,202.19" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[592f391a9afa57c3b9a6d303f8977e32]
@startuml
node "Rootfs Init Daemon" {
	component "Task Data Structure" as task_data
	component "Notification/Service Interface" as notify_if
	component "Process Dispatcher" as proc_dispatch
	component "Config Parser" as config_parser
}
cloud "Tasks" as tasks
component "Notfication/Service Library" as notify_lib
cloud "Task Configurations" as task_configs
node "BaseOS Monitor" as corb_monitor

notify_if <-down..-> notify_lib : AF_UNIX\nsocket
notify_if <-..-> corb_monitor
task_configs -up-> config_parser
proc_dispatch -right-> tasks
tasks -right-> notify_lib
tasks -left-> task_configs
proc_dispatch <-up-> task_data
notify_if -left-> task_data
config_parser <-up-> task_data

note top of notify_if
    Notifies Task Data Structure of events
    from SD_NOTIFY library and BaseOS Monitor.
    Multi-threaded UNIX domain socket server
    for Notification/Sevice Library.
end note

note top of task_data
    "Intelligent" data structure implementing a task database. Keeps
    track of waiting, running, finished tasks and handles state changes
    through events. Will notify process dispatcher upon a state change
    that implies a new task is ready to run.
end note

note bottom of notify_lib
    C interface compatible with SD_NOTIFY. Feeds
    notifications to Task Data Structure as events.
end note

note top of proc_dispatch
    Multi-threaded process spawner. Spawns and waits
    for processes. Notifies Task Data Structure of
    "spawn" and "wait" events.  SafeSystemStartup
    parts will be in here to spawn a jailed task
    according to config.
end note

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.11+9-Ubuntu-0ubuntu2
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>